<!doctype html>
<html>
  <head>
    <link rel="shortcut icon" type="image/png" href="/uaa/favicon.png"/>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>UAA API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="overview">Overview</h1>

<p>The User Account and Authentication Service (UAA):</p>

<ul>
<li>is an OAuth2 server that can be used for centralized identity management.</li>
<li>owns the user accounts and authentication sources (SAML, LDAP)</li>
<li>supports standard protocols such as SAML, LDAP and OpenID Connect to provide single sign-on and delegated authorization to web applications</li>
<li>can be invoked via JSON APIs</li>
<li>provides a basic login/approval UI for web client apps</li>
<li>supports APIs for user account management for an external web UI</li>
<li>most of the APIs are defined by the specs for the OAuth2, OpenID Connect, and SCIM standards.</li>
</ul>

<h1 id="authorization">Authorization</h1>

<h2 id="authorization-code-grant">Authorization Code Grant</h2>

<h3 id="browser-flow">Browser flow</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/authorize?response_type=code&amp;client_id=login&amp;scope=openid+oauth.approvals&amp;redirect_uri=http%3A%2F%2Fredirect.to%2Fapp'</span> -i -H <span class="s1">'Accept: application/x-www-form-urlencoded'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/oauth/authorize?response_type=code&amp;client_id=login&amp;scope=openid+oauth.approvals&amp;redirect_uri=http%3A%2F%2Fredirect.to%2Fapp</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Strict-Transport-Security</span><span class="p">:</span> <span class="s">max-age=31536000</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span><span class="s"> </span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">http://redirect.to/app?code=iIGe1A</span>

</code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>either <code class="prettyprint">code</code> for requesting an authorization code for an access token, as per OAuth spec</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>Optional</td>
<td>requested scopes, space-delimited</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Optional</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied), optional if pre-registered by the client</td>
</tr>
</tbody></table>

<h3 id="api-flow">Api flow</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/authorize?response_type=code&amp;client_id=login&amp;redirect_uri=https%3A%2F%2Fuaa.cloudfoundry.com%2Fredirect%2Fcf&amp;state=2LJF2E'</span> -i -H <span class="s1">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIwOGFjMGRhYy02NzJjLTRlMWUtOGI1ZS04ZjA4ZjQ4YjRkNDciLCJzdWIiOiJiNThjM2Q5OC0zNWNlLTQwODEtYjU3Ni00ZWI1MTRkNTY5YjEiLCJzY29wZSI6WyJ1YWEudXNlciJdLCJjbGllbnRfaWQiOiJjZiIsImNpZCI6ImNmIiwiYXpwIjoiY2YiLCJncmFudF90eXBlIjoicGFzc3dvcmQiLCJ1c2VyX2lkIjoiYjU4YzNkOTgtMzVjZS00MDgxLWI1NzYtNGViNTE0ZDU2OWIxIiwib3JpZ2luIjoidWFhIiwidXNlcl9uYW1lIjoibWFyaXNzYSIsImVtYWlsIjoibWFyaXNzYUB0ZXN0Lm9yZyIsImF1dGhfdGltZSI6MTQ1OTM3NjYzNywicmV2X3NpZyI6IjJjZWRkYzc1IiwiaWF0IjoxNDU5Mzc2NjM3LCJleHAiOjE0NTk0MTk4MzcsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsiY2YiLCJ1YWEiXX0.T4_DvI5Ip2OCL3Lw4t9KlS9c8SlmruTMDsd_dQT9cFY'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/oauth/authorize?response_type=code&amp;client_id=login&amp;redirect_uri=https%3A%2F%2Fuaa.cloudfoundry.com%2Fredirect%2Fcf&amp;state=2LJF2E</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIwOGFjMGRhYy02NzJjLTRlMWUtOGI1ZS04ZjA4ZjQ4YjRkNDciLCJzdWIiOiJiNThjM2Q5OC0zNWNlLTQwODEtYjU3Ni00ZWI1MTRkNTY5YjEiLCJzY29wZSI6WyJ1YWEudXNlciJdLCJjbGllbnRfaWQiOiJjZiIsImNpZCI6ImNmIiwiYXpwIjoiY2YiLCJncmFudF90eXBlIjoicGFzc3dvcmQiLCJ1c2VyX2lkIjoiYjU4YzNkOTgtMzVjZS00MDgxLWI1NzYtNGViNTE0ZDU2OWIxIiwib3JpZ2luIjoidWFhIiwidXNlcl9uYW1lIjoibWFyaXNzYSIsImVtYWlsIjoibWFyaXNzYUB0ZXN0Lm9yZyIsImF1dGhfdGltZSI6MTQ1OTM3NjYzNywicmV2X3NpZyI6IjJjZWRkYzc1IiwiaWF0IjoxNDU5Mzc2NjM3LCJleHAiOjE0NTk0MTk4MzcsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsiY2YiLCJ1YWEiXX0.T4_DvI5Ip2OCL3Lw4t9KlS9c8SlmruTMDsd_dQT9cFY</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span><span class="s"> </span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://uaa.cloudfoundry.com/redirect/cf?code=2vgEq6&amp;state=2LJF2E</span>

</code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td><code class="prettyprint">code</code> for requesting an authorization code for an access token, as per OAuth spec</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Optional</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied), optional if pre-registered by the client</td>
</tr>
<tr>
<td>state</td>
<td>String</td>
<td>Required</td>
<td>any random string to be returned in the Location header as a query parameter, used to achieve per-request customization</td>
</tr>
</tbody></table>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Bearer token containing uaa.user scope - the authentication for this user</td>
</tr>
</tbody></table>

<aside class="notice">
  The client must have autoapprove=true, or you will not get a code back
  If the client doesn&rsquo;t have a redirect_uri registered, it is an required parameter of the request
  The token must have scope &ldquo;uaa.user&rdquo; in order for this request to succeed.
</aside>

<h2 id="implicit-grant">Implicit Grant</h2>

<h3 id="browser-flow">Browser flow</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/authorize?response_type=token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F'</span> -i -H <span class="s1">'Accept: application/x-www-form-urlencoded'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/oauth/authorize?response_type=token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Strict-Transport-Security</span><span class="p">:</span> <span class="s">max-age=31536000</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span><span class="s"> </span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">http://localhost:8080/app/#token_type=bearer&amp;access_token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiJlN2Q4NDQxMy1hMDRjLTQ4MWYtODI2Mi1kMjBlYzMyZTExNzkiLCJzdWIiOiJiNThjM2Q5OC0zNWNlLTQwODEtYjU3Ni00ZWI1MTRkNTY5YjEiLCJzY29wZSI6WyJvcGVuaWQiXSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiYXpwIjoiYXBwIiwidXNlcl9pZCI6ImI1OGMzZDk4LTM1Y2UtNDA4MS1iNTc2LTRlYjUxNGQ1NjliMSIsIm9yaWdpbiI6InVhYSIsInVzZXJfbmFtZSI6Im1hcmlzc2EiLCJlbWFpbCI6Im1hcmlzc2FAdGVzdC5vcmciLCJyZXZfc2lnIjoiMzQ2MWQwYTkiLCJpYXQiOjE0NTkzNzY2MzgsImV4cCI6MTQ1OTQxOTgzOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImF1ZCI6WyJhcHAiLCJvcGVuaWQiXX0.JVBiFhebZvIiUaISyX9sOzTf7kDG_dxIhoRs2Jt8dY8&amp;expires_in=43199&amp;jti=e7d84413-a04c-481f-8262-d20ec32e1179</span>

</code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>Expected response type, in this case &ldquo;token&rdquo;, i.e. an access token</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>Optional</td>
<td>requested scopes, space-delimited</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Optional</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied), optional if pre-registered by the client</td>
</tr>
</tbody></table>

<p><em>Response Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Location</td>
<td>Location as defined in the spec includes access_token in the reply fragment if successful</td>
</tr>
</tbody></table>

<h2 id="openid-connect-flow">OpenID Connect flow</h2>

<h3 id="id-token">ID token</h3>

<p>The authorization request may specify a response type of id_token, and an ID token as defined
  by OpenID Connect will be included in the fragment of the redirect URL.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/authorize?response_type=id_token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F'</span> -i -H <span class="s1">'Accept: application/x-www-form-urlencoded'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/oauth/authorize?response_type=id_token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Strict-Transport-Security</span><span class="p">:</span> <span class="s">max-age=31536000</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span><span class="s"> </span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">http://localhost:8080/app/#token_type=bearer&amp;id_token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJiNThjM2Q5OC0zNWNlLTQwODEtYjU3Ni00ZWI1MTRkNTY5YjEiLCJ1c2VyX25hbWUiOiJtYXJpc3NhIiwib3JpZ2luIjoidWFhIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsImNsaWVudF9pZCI6ImFwcCIsImF1ZCI6WyJhcHAiXSwiemlkIjoidWFhIiwidXNlcl9pZCI6ImI1OGMzZDk4LTM1Y2UtNDA4MS1iNTc2LTRlYjUxNGQ1NjliMSIsImF6cCI6ImFwcCIsInNjb3BlIjpbIm9wZW5pZCJdLCJleHAiOjE0NTk0MTk4MzgsImlhdCI6MTQ1OTM3NjYzOCwianRpIjoiOGYyNThlZmEtZjk2Zi00YTIxLWE1YWQtMGU5OTMxNzhmMDVlIiwiZW1haWwiOiJtYXJpc3NhQHRlc3Qub3JnIiwicmV2X3NpZyI6IjM0NjFkMGE5IiwiY2lkIjoiYXBwIn0.LPfDT-KtRU-8byFYuaw0UmBKyW2y0CGxQXhwJcTLGkE&amp;expires_in=43199&amp;jti=8f258efa-f96f-4a21-a5ad-0e993178f05e</span>

</code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>Expected response type, in this case &ldquo;id_token&rdquo;</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>Optional</td>
<td>requested scopes, space-delimited</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Optional</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied), optional if pre-registered by the client</td>
</tr>
</tbody></table>

<p><em>Response Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Location</td>
<td>Location as defined in the spec includes id_token in the reply fragment if successful</td>
</tr>
</tbody></table>

<h3 id="with-authorization-code-grant">With authorization code grant</h3>

<p>The request may specify that the client expects an ID token as defined by OpenID Connect, and this
  ID token will be included alongside the authorization code.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/authorize?response_type=code+id_token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F'</span> -i -H <span class="s1">'Accept: application/x-www-form-urlencoded'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/oauth/authorize?response_type=code+id_token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Strict-Transport-Security</span><span class="p">:</span> <span class="s">max-age=31536000</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span><span class="s"> </span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">http://localhost:8080/app/#token_type=bearer&amp;id_token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJiNThjM2Q5OC0zNWNlLTQwODEtYjU3Ni00ZWI1MTRkNTY5YjEiLCJ1c2VyX25hbWUiOiJtYXJpc3NhIiwib3JpZ2luIjoidWFhIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsImNsaWVudF9pZCI6ImFwcCIsImF1ZCI6WyJhcHAiXSwiemlkIjoidWFhIiwidXNlcl9pZCI6ImI1OGMzZDk4LTM1Y2UtNDA4MS1iNTc2LTRlYjUxNGQ1NjliMSIsImF6cCI6ImFwcCIsInNjb3BlIjpbIm9wZW5pZCJdLCJleHAiOjE0NTk0MTk4MzgsImlhdCI6MTQ1OTM3NjYzOCwianRpIjoiY2E4MDc3YTMtYjA3My00OTBhLTllZjAtYmI1ODAxM2MyY2Y2IiwiZW1haWwiOiJtYXJpc3NhQHRlc3Qub3JnIiwicmV2X3NpZyI6IjM0NjFkMGE5IiwiY2lkIjoiYXBwIn0.8n6SuyWwNJsSnuCEk17Jku9Dj40L5IfKqbF5THCa1Os&amp;code=qZfNKj&amp;expires_in=43199&amp;jti=ca8077a3-b073-490a-9ef0-bb58013c2cf6</span>

</code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>Expected response type, in this case &ldquo;id_token code&rdquo;, indicating a request for an ID token and an authorization code.</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>Optional</td>
<td>requested scopes, space-delimited</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Optional</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied), optional if pre-registered by the client</td>
</tr>
</tbody></table>

<p><em>Response Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Location</td>
<td>Location as defined in the spec includes code and id_token in the reply fragment if successful</td>
</tr>
</tbody></table>

<h3 id="with-implicit-grant">With implicit grant</h3>

<p>The request may specify that the client expects an ID token as defined by OpenID Connect, and this
  ID token will be included alongside the access token.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/authorize?response_type=token+id_token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F'</span> -i -H <span class="s1">'Accept: application/x-www-form-urlencoded'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/oauth/authorize?response_type=token+id_token&amp;client_id=app&amp;scope=openid&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8080%2Fapp%2F</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">302</span> <span class="ne">Found</span>
<span class="na">Strict-Transport-Security</span><span class="p">:</span> <span class="s">max-age=31536000</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span><span class="s"> </span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">http://localhost:8080/app/#token_type=bearer&amp;access_token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIzZTkyMTFkYy0zZDg0LTQyMmQtODUxYy05MzA2MWFkZDU1MWIiLCJzdWIiOiJiNThjM2Q5OC0zNWNlLTQwODEtYjU3Ni00ZWI1MTRkNTY5YjEiLCJzY29wZSI6WyJvcGVuaWQiXSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiYXpwIjoiYXBwIiwidXNlcl9pZCI6ImI1OGMzZDk4LTM1Y2UtNDA4MS1iNTc2LTRlYjUxNGQ1NjliMSIsIm9yaWdpbiI6InVhYSIsInVzZXJfbmFtZSI6Im1hcmlzc2EiLCJlbWFpbCI6Im1hcmlzc2FAdGVzdC5vcmciLCJyZXZfc2lnIjoiMzQ2MWQwYTkiLCJpYXQiOjE0NTkzNzY2MzgsImV4cCI6MTQ1OTQxOTgzOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImF1ZCI6WyJhcHAiLCJvcGVuaWQiXX0.hVXwVORxRFon3l1IWTOjTSY2RD2MvM1rvJXBuV-Gg44&amp;id_token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJiNThjM2Q5OC0zNWNlLTQwODEtYjU3Ni00ZWI1MTRkNTY5YjEiLCJ1c2VyX25hbWUiOiJtYXJpc3NhIiwib3JpZ2luIjoidWFhIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsImNsaWVudF9pZCI6ImFwcCIsImF1ZCI6WyJhcHAiXSwiemlkIjoidWFhIiwidXNlcl9pZCI6ImI1OGMzZDk4LTM1Y2UtNDA4MS1iNTc2LTRlYjUxNGQ1NjliMSIsImF6cCI6ImFwcCIsInNjb3BlIjpbIm9wZW5pZCJdLCJleHAiOjE0NTk0MTk4MzgsImlhdCI6MTQ1OTM3NjYzOCwianRpIjoiM2U5MjExZGMtM2Q4NC00MjJkLTg1MWMtOTMwNjFhZGQ1NTFiIiwiZW1haWwiOiJtYXJpc3NhQHRlc3Qub3JnIiwicmV2X3NpZyI6IjM0NjFkMGE5IiwiY2lkIjoiYXBwIn0.dWdEKb9kYmcnC_BsH4cglkfUyVOKPC7lU0_5ZZDv5Ew&amp;expires_in=43199&amp;jti=3e9211dc-3d84-422d-851c-93061add551b</span>

</code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>Expected response type, in this case &ldquo;token id_token&rdquo;, indicating both an access token and an ID token.</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>Optional</td>
<td>requested scopes, space-delimited</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Optional</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied), optional if pre-registered by the client</td>
</tr>
</tbody></table>

<p><em>Response Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Location</td>
<td>Location as defined in the spec includes access_token and id_token in the reply fragment if successful</td>
</tr>
</tbody></table>

<h1 id="token">Token</h1>

<h2 id="authorization-code-grant">Authorization Code Grant</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/token'</span> -i -X POST -H <span class="s1">'Accept: application/json'</span> -H <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> -d <span class="s1">'client_id=login&amp;client_secret=loginsecret&amp;grant_type=authorization_code&amp;response_type=token&amp;code=EtRZlq&amp;redirect_uri=https%3A%2F%2Fuaa.cloudfoundry.com%2Fredirect%2Fcf'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

client_id=login&amp;client_secret=loginsecret&amp;grant_type=authorization_code&amp;response_type=token&amp;code=EtRZlq&amp;redirect_uri=https%3A%2F%2Fuaa.cloudfoundry.com%2Fredirect%2Fcf
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1668</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI0YTJhMjkxZC1mZTU0LTQ3YTUtOTIyOC1mMDkwZTAxNjJkYzciLCJzdWIiOiJiNjIyZDE2Yy0wMDZiLTRhOWMtOTVjZS1lZmU2YmFiMzNhZGUiLCJzY29wZSI6WyJvcGVuaWQiLCJvYXV0aC5hcHByb3ZhbHMiXSwiY2xpZW50X2lkIjoibG9naW4iLCJjaWQiOiJsb2dpbiIsImF6cCI6ImxvZ2luIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInVzZXJfaWQiOiJiNjIyZDE2Yy0wMDZiLTRhOWMtOTVjZS1lZmU2YmFiMzNhZGUiLCJvcmlnaW4iOiJ1YWEiLCJ1c2VyX25hbWUiOiJndXN4NllAdGVzdC5vcmciLCJlbWFpbCI6Imd1c3g2WUB0ZXN0Lm9yZyIsImF1dGhfdGltZSI6MTQ1OTM3NjY0OCwicmV2X3NpZyI6ImExZWIxM2Y1IiwiaWF0IjoxNDU5Mzc2NjQ4LCJleHAiOjE0NTk0MTk4NDgsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsib3BlbmlkIiwibG9naW4iLCJvYXV0aCJdfQ.O3ZmFEd7UKeS3phgalHZWXrSt4T_P8ehyWmR8E-8f6Q"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI2YWZlZGUzMy1kYjRjLTQ4NjQtYmUwYS1lNTRjODM5NjBiZTAtciIsInN1YiI6ImI2MjJkMTZjLTAwNmItNGE5Yy05NWNlLWVmZTZiYWIzM2FkZSIsInNjb3BlIjpbIm9wZW5pZCIsIm9hdXRoLmFwcHJvdmFscyJdLCJpYXQiOjE0NTkzNzY2NDgsImV4cCI6MTQ2MTk2ODY0OCwiY2lkIjoibG9naW4iLCJjbGllbnRfaWQiOiJsb2dpbiIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwidXNlcl9uYW1lIjoiZ3VzeDZZQHRlc3Qub3JnIiwib3JpZ2luIjoidWFhIiwidXNlcl9pZCI6ImI2MjJkMTZjLTAwNmItNGE5Yy05NWNlLWVmZTZiYWIzM2FkZSIsInJldl9zaWciOiJhMWViMTNmNSIsImF1ZCI6WyJvcGVuaWQiLCJsb2dpbiIsIm9hdXRoIl19.AnK7Idv3MtqK66UXWQW29M097uudYGyqYgXEn0CRW2s"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">43199</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"openid oauth.approvals"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"jti"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4a2a291d-fe54-47a5-9228-f090e0162dc7"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>the type of token that should be issued.</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Required if provided on authorization request</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied)</td>
</tr>
<tr>
<td>code</td>
<td>String</td>
<td>Required</td>
<td>the authorization code, obtained from /oauth/authorize, issued for the user</td>
</tr>
<tr>
<td>grant_type</td>
<td>String</td>
<td>Required</td>
<td>the type of authentication being used to obtain the token, in this case <code class="prettyprint">authorization_code</code></td>
</tr>
<tr>
<td>client_secret</td>
<td>String</td>
<td>Required</td>
<td>the secret passphrase configured for the OAuth client</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>String</td>
<td>the access token for the user to whom the authorization code was issued</td>
</tr>
<tr>
<td>token_type</td>
<td>String</td>
<td>the type of the access token issued, i.e. <code class="prettyprint">bearer</code></td>
</tr>
<tr>
<td>expires_in</td>
<td>Number</td>
<td>number of seconds until token expiry</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>space-delimited list of scopes authorized by the user for this client</td>
</tr>
<tr>
<td>refresh_token</td>
<td>String</td>
<td>an OAuth refresh token for refresh grants</td>
</tr>
<tr>
<td>jti</td>
<td>String</td>
<td>a globally unique identifier for this token</td>
</tr>
</tbody></table>

<h2 id="client-credentials-grant">Client Credentials Grant</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/token'</span> -i -X POST -H <span class="s1">'Accept: application/json'</span> -H <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> -d <span class="s1">'client_id=login&amp;client_secret=loginsecret&amp;grant_type=client_credentials&amp;response_type=token'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

client_id=login&amp;client_secret=loginsecret&amp;grant_type=client_credentials&amp;response_type=token
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1327</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIwNzJlMGFjMC1lNzAzLTRjMzktOWQwZS1jNzlmZjcxMDQ2MGEiLCJzdWIiOiJsb2dpbiIsImF1dGhvcml0aWVzIjpbImNsaWVudHMucmVhZCIsImVtYWlscy53cml0ZSIsInNjaW0udXNlcmlkcyIsInBhc3N3b3JkLndyaXRlIiwiaWRwcy53cml0ZSIsIm5vdGlmaWNhdGlvbnMud3JpdGUiLCJvYXV0aC5sb2dpbiIsInNjaW0ud3JpdGUiLCJjcml0aWNhbF9ub3RpZmljYXRpb25zLndyaXRlIl0sInNjb3BlIjpbImNsaWVudHMucmVhZCIsImVtYWlscy53cml0ZSIsInNjaW0udXNlcmlkcyIsInBhc3N3b3JkLndyaXRlIiwiaWRwcy53cml0ZSIsIm5vdGlmaWNhdGlvbnMud3JpdGUiLCJvYXV0aC5sb2dpbiIsInNjaW0ud3JpdGUiLCJjcml0aWNhbF9ub3RpZmljYXRpb25zLndyaXRlIl0sImNsaWVudF9pZCI6ImxvZ2luIiwiY2lkIjoibG9naW4iLCJhenAiOiJsb2dpbiIsImdyYW50X3R5cGUiOiJjbGllbnRfY3JlZGVudGlhbHMiLCJyZXZfc2lnIjoiOWNjM2FjNzkiLCJpYXQiOjE0NTkzNzY2NDcsImV4cCI6MTQ1OTQxOTg0NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImF1ZCI6WyJsb2dpbiIsImNsaWVudHMiLCJlbWFpbHMiLCJzY2ltIiwicGFzc3dvcmQiLCJpZHBzIiwibm90aWZpY2F0aW9ucyIsIm9hdXRoIiwiY3JpdGljYWxfbm90aWZpY2F0aW9ucyJdfQ.Fh72cNZwidTWr28u6xl4dHf-295YD4ABJI94KF2bVvw"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">43199</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"clients.read emails.write scim.userids password.write idps.write notifications.write oauth.login scim.write critical_notifications.write"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"jti"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"072e0ac0-e703-4c39-9d0e-c79ff710460a"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>the type of token that should be issued.</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>grant_type</td>
<td>String</td>
<td>Required</td>
<td>the type of authentication being used to obtain the token, in this case <code class="prettyprint">client_credentials</code></td>
</tr>
<tr>
<td>client_secret</td>
<td>String</td>
<td>Required</td>
<td>the secret passphrase configured for the OAuth client</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>String</td>
<td>the access token</td>
</tr>
<tr>
<td>token_type</td>
<td>String</td>
<td>the type of the access token issued, i.e. <code class="prettyprint">bearer</code></td>
</tr>
<tr>
<td>expires_in</td>
<td>Number</td>
<td>number of seconds until token expiry</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>space-delimited list of scopes authorized by the user for this client</td>
</tr>
<tr>
<td>jti</td>
<td>String</td>
<td>a globally unique identifier for this token</td>
</tr>
</tbody></table>

<h2 id="password-grant">Password Grant</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/token'</span> -i -X POST -H <span class="s1">'Accept: application/json'</span> -H <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> -d <span class="s1">'client_id=app&amp;client_secret=appclientsecret&amp;grant_type=password&amp;username=9g969G%40test.org&amp;password=secr3T&amp;response_type=token'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

client_id=app&amp;client_secret=appclientsecret&amp;grant_type=password&amp;username=9g969G%40test.org&amp;password=secr3T&amp;response_type=token
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1925</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiJkMzM5Zjc0Yi1iMTk3LTQ2NzktODIwMy1iMjM5OGZjNmMyYzMiLCJzdWIiOiJiOGU2MWU1Ni1kYjZhLTRhYmEtOTc5MC1lZTlhYmZlZGMzMzgiLCJzY29wZSI6WyJzY2ltLnVzZXJpZHMiLCJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiXSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiYXpwIjoiYXBwIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwidXNlcl9pZCI6ImI4ZTYxZTU2LWRiNmEtNGFiYS05NzkwLWVlOWFiZmVkYzMzOCIsIm9yaWdpbiI6InVhYSIsInVzZXJfbmFtZSI6IjlnOTY5R0B0ZXN0Lm9yZyIsImVtYWlsIjoiOWc5NjlHQHRlc3Qub3JnIiwiYXV0aF90aW1lIjoxNDU5Mzc2NjQ3LCJyZXZfc2lnIjoiMmZmYmU2MGQiLCJpYXQiOjE0NTkzNzY2NDcsImV4cCI6MTQ1OTQxOTg0NywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImF1ZCI6WyJhcHAiLCJzY2ltIiwib3BlbmlkIiwiY2xvdWRfY29udHJvbGxlciIsInBhc3N3b3JkIl19.518ba-f6Sj2Mi8WMhxpyohe69Kgb3SV4ao0_IrOSl-g"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI5NzJkNmJmNC0zMDlmLTQ2NWQtYmFjNi0zNmVkYTE5MTMzMDEtciIsInN1YiI6ImI4ZTYxZTU2LWRiNmEtNGFiYS05NzkwLWVlOWFiZmVkYzMzOCIsInNjb3BlIjpbInNjaW0udXNlcmlkcyIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIucmVhZCIsInBhc3N3b3JkLndyaXRlIiwiY2xvdWRfY29udHJvbGxlci53cml0ZSJdLCJpYXQiOjE0NTkzNzY2NDcsImV4cCI6MTQ2MTk2ODY0NywiY2lkIjoiYXBwIiwiY2xpZW50X2lkIjoiYXBwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImdyYW50X3R5cGUiOiJwYXNzd29yZCIsInVzZXJfbmFtZSI6IjlnOTY5R0B0ZXN0Lm9yZyIsIm9yaWdpbiI6InVhYSIsInVzZXJfaWQiOiJiOGU2MWU1Ni1kYjZhLTRhYmEtOTc5MC1lZTlhYmZlZGMzMzgiLCJyZXZfc2lnIjoiMmZmYmU2MGQiLCJhdWQiOlsiYXBwIiwic2NpbSIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCJdfQ.mmP1NfG5yz8SzAyJkkSl-13fkPIN5K1ZWVYi5qGslH4"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">43199</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"scim.userids openid cloud_controller.read password.write cloud_controller.write"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"jti"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"d339f74b-b197-4679-8203-b2398fc6c2c3"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>the type of token that should be issued.</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>grant_type</td>
<td>String</td>
<td>Required</td>
<td>the type of authentication being used to obtain the token, in this case <code class="prettyprint">password</code></td>
</tr>
<tr>
<td>client_secret</td>
<td>String</td>
<td>Required</td>
<td>the secret passphrase configured for the OAuth client</td>
</tr>
<tr>
<td>username</td>
<td>String</td>
<td>Required</td>
<td>the username for the user trying to get a token</td>
</tr>
<tr>
<td>password</td>
<td>String</td>
<td>Required</td>
<td>the password for the user trying to get a token</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>String</td>
<td>the access token</td>
</tr>
<tr>
<td>token_type</td>
<td>String</td>
<td>the type of the access token issued, i.e. <code class="prettyprint">bearer</code></td>
</tr>
<tr>
<td>expires_in</td>
<td>Number</td>
<td>number of seconds until token expiry</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>space-delimited list of scopes authorized by the user for this client</td>
</tr>
<tr>
<td>refresh_token</td>
<td>String</td>
<td>an OAuth refresh token for refresh grants</td>
</tr>
<tr>
<td>jti</td>
<td>String</td>
<td>a globally unique identifier for this token</td>
</tr>
</tbody></table>

<h3 id="one-time-passcode">One-time Passcode</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/token'</span> -i -u <span class="s1">'app:appclientsecret'</span> -X POST -H <span class="s1">'Accept: application/json'</span> -H <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> -d <span class="s1">'grant_type=password&amp;passcode=slv6MF&amp;response_type=token'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic YXBwOmFwcGNsaWVudHNlY3JldA==</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

grant_type=password&amp;passcode=slv6MF&amp;response_type=token
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1874</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIyNWI0YTAxMi1jODU1LTRkMGUtYmM5Yy00ODg3NzRhZWI1OTAiLCJzdWIiOiI5NGEzMWRkZS0zNGM3LTQxZDQtOTdhMC1mM2RjOTJiODJmNWYiLCJzY29wZSI6WyJzY2ltLnVzZXJpZHMiLCJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiXSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiYXpwIjoiYXBwIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwidXNlcl9pZCI6Ijk0YTMxZGRlLTM0YzctNDFkNC05N2EwLWYzZGM5MmI4MmY1ZiIsIm9yaWdpbiI6InVhYSIsInVzZXJfbmFtZSI6Im1hcmlzc2EiLCJlbWFpbCI6Im1hcmlzc2FAdGVzdC5vcmciLCJyZXZfc2lnIjoiMzVmMjIxMDAiLCJpYXQiOjE0NTkzNzY2NDYsImV4cCI6MTQ1OTQxOTg0NiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImF1ZCI6WyJhcHAiLCJzY2ltIiwib3BlbmlkIiwiY2xvdWRfY29udHJvbGxlciIsInBhc3N3b3JkIl19.7kzGC-I0Z1v0X2C3u3F2cuwhe6AEdd-nTQlBsuTT82c"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiJlMDJlNWU0Zi1iNDliLTQ0ODYtODMzMi04MTYwZmU0OTBhZDQtciIsInN1YiI6Ijk0YTMxZGRlLTM0YzctNDFkNC05N2EwLWYzZGM5MmI4MmY1ZiIsInNjb3BlIjpbInNjaW0udXNlcmlkcyIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIucmVhZCIsInBhc3N3b3JkLndyaXRlIiwiY2xvdWRfY29udHJvbGxlci53cml0ZSJdLCJpYXQiOjE0NTkzNzY2NDYsImV4cCI6MTQ2MTk2ODY0NiwiY2lkIjoiYXBwIiwiY2xpZW50X2lkIjoiYXBwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImdyYW50X3R5cGUiOiJwYXNzd29yZCIsInVzZXJfbmFtZSI6Im1hcmlzc2EiLCJvcmlnaW4iOiJ1YWEiLCJ1c2VyX2lkIjoiOTRhMzFkZGUtMzRjNy00MWQ0LTk3YTAtZjNkYzkyYjgyZjVmIiwicmV2X3NpZyI6IjM1ZjIyMTAwIiwiYXVkIjpbImFwcCIsInNjaW0iLCJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyIiwicGFzc3dvcmQiXX0.AEazRwkyIcmrEoeXnlL7HDDzi628xQBpOXf9rlN2Yhc"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">43199</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"scim.userids openid cloud_controller.read password.write cloud_controller.write"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"jti"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"25b4a012-c855-4d0e-bc9c-488774aeb590"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Header</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Base64 encoded client details in the format: <code class="prettyprint">Basic client_id:client_secret</code></td>
</tr>
</tbody></table>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>the type of token that should be issued.</td>
</tr>
<tr>
<td>grant_type</td>
<td>String</td>
<td>Required</td>
<td>the type of authentication being used to obtain the token, in this case <code class="prettyprint">password</code></td>
</tr>
<tr>
<td>passcode</td>
<td>String</td>
<td>Required</td>
<td>the one-time passcode for the user which can be retrieved by going to <code class="prettyprint">/passcode</code></td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>String</td>
<td>the access token</td>
</tr>
<tr>
<td>token_type</td>
<td>String</td>
<td>the type of the access token issued, i.e. <code class="prettyprint">bearer</code></td>
</tr>
<tr>
<td>expires_in</td>
<td>Number</td>
<td>number of seconds until token expiry</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>space-delimited list of scopes authorized by the user for this client</td>
</tr>
<tr>
<td>refresh_token</td>
<td>String</td>
<td>an OAuth refresh token for refresh grants</td>
</tr>
<tr>
<td>jti</td>
<td>String</td>
<td>a globally unique identifier for this token</td>
</tr>
</tbody></table>

<aside class="notice">
  The client-id and client-secret can also be included in the header as Basic Authorization for all grant types.
</aside>

<h2 id="refresh-token">Refresh Token</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/token'</span> -i -X POST -H <span class="s1">'Accept: application/json'</span> -H <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> -d <span class="s1">'client_id=app&amp;client_secret=appclientsecret&amp;grant_type=refresh_token&amp;refresh_token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIzNTJmOGQ0Yy1mYTU4LTQ1ZjQtODc4Zi03OTk5ZWFkZGRjOGEtciIsInN1YiI6IjQxZWM0ODQ4LWM4MTYtNGFmYS05YWNiLTZhMWFjZTVhYzVjYyIsInNjb3BlIjpbInNjaW0udXNlcmlkcyIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIucmVhZCIsInBhc3N3b3JkLndyaXRlIiwiY2xvdWRfY29udHJvbGxlci53cml0ZSJdLCJpYXQiOjE0NTkzNzY2NDgsImV4cCI6MTQ2MTk2ODY0OCwiY2lkIjoiYXBwIiwiY2xpZW50X2lkIjoiYXBwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImdyYW50X3R5cGUiOiJwYXNzd29yZCIsInVzZXJfbmFtZSI6IlN5SnFzM0B0ZXN0Lm9yZyIsIm9yaWdpbiI6InVhYSIsInVzZXJfaWQiOiI0MWVjNDg0OC1jODE2LTRhZmEtOWFjYi02YTFhY2U1YWM1Y2MiLCJyZXZfc2lnIjoiZDEzZmU5MDAiLCJhdWQiOlsiYXBwIiwic2NpbSIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCJdfQ.b3gMXU7kVYl9iy1d6FFRUsiDj4OrQwftchVVJ-6hlhA'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

client_id=app&amp;client_secret=appclientsecret&amp;grant_type=refresh_token&amp;refresh_token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIzNTJmOGQ0Yy1mYTU4LTQ1ZjQtODc4Zi03OTk5ZWFkZGRjOGEtciIsInN1YiI6IjQxZWM0ODQ4LWM4MTYtNGFmYS05YWNiLTZhMWFjZTVhYzVjYyIsInNjb3BlIjpbInNjaW0udXNlcmlkcyIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIucmVhZCIsInBhc3N3b3JkLndyaXRlIiwiY2xvdWRfY29udHJvbGxlci53cml0ZSJdLCJpYXQiOjE0NTkzNzY2NDgsImV4cCI6MTQ2MTk2ODY0OCwiY2lkIjoiYXBwIiwiY2xpZW50X2lkIjoiYXBwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImdyYW50X3R5cGUiOiJwYXNzd29yZCIsInVzZXJfbmFtZSI6IlN5SnFzM0B0ZXN0Lm9yZyIsIm9yaWdpbiI6InVhYSIsInVzZXJfaWQiOiI0MWVjNDg0OC1jODE2LTRhZmEtOWFjYi02YTFhY2U1YWM1Y2MiLCJyZXZfc2lnIjoiZDEzZmU5MDAiLCJhdWQiOlsiYXBwIiwic2NpbSIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCJdfQ.b3gMXU7kVYl9iy1d6FFRUsiDj4OrQwftchVVJ-6hlhA
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1895</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIwMWM5NDc0Ni1lMmE4LTRjZmUtYWFmMS1jYzM3NzczZDg0YzYiLCJzdWIiOiI0MWVjNDg0OC1jODE2LTRhZmEtOWFjYi02YTFhY2U1YWM1Y2MiLCJzY29wZSI6WyJzY2ltLnVzZXJpZHMiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiLCJvcGVuaWQiXSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiYXpwIjoiYXBwIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwidXNlcl9pZCI6IjQxZWM0ODQ4LWM4MTYtNGFmYS05YWNiLTZhMWFjZTVhYzVjYyIsIm9yaWdpbiI6InVhYSIsInVzZXJfbmFtZSI6IlN5SnFzM0B0ZXN0Lm9yZyIsImVtYWlsIjoiU3lKcXMzQHRlc3Qub3JnIiwicmV2X3NpZyI6ImQxM2ZlOTAwIiwiaWF0IjoxNDU5Mzc2NjQ4LCJleHAiOjE0NTk0MTk4NDgsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsiYXBwIiwic2NpbSIsImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCIsIm9wZW5pZCJdfQ.3HzhMU1SKvNyqw9YiPVCPu-IgUq9YzX6lTFuiCOu7Y8"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIzNTJmOGQ0Yy1mYTU4LTQ1ZjQtODc4Zi03OTk5ZWFkZGRjOGEtciIsInN1YiI6IjQxZWM0ODQ4LWM4MTYtNGFmYS05YWNiLTZhMWFjZTVhYzVjYyIsInNjb3BlIjpbInNjaW0udXNlcmlkcyIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIucmVhZCIsInBhc3N3b3JkLndyaXRlIiwiY2xvdWRfY29udHJvbGxlci53cml0ZSJdLCJpYXQiOjE0NTkzNzY2NDgsImV4cCI6MTQ2MTk2ODY0OCwiY2lkIjoiYXBwIiwiY2xpZW50X2lkIjoiYXBwIiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3VhYS9vYXV0aC90b2tlbiIsInppZCI6InVhYSIsImdyYW50X3R5cGUiOiJwYXNzd29yZCIsInVzZXJfbmFtZSI6IlN5SnFzM0B0ZXN0Lm9yZyIsIm9yaWdpbiI6InVhYSIsInVzZXJfaWQiOiI0MWVjNDg0OC1jODE2LTRhZmEtOWFjYi02YTFhY2U1YWM1Y2MiLCJyZXZfc2lnIjoiZDEzZmU5MDAiLCJhdWQiOlsiYXBwIiwic2NpbSIsIm9wZW5pZCIsImNsb3VkX2NvbnRyb2xsZXIiLCJwYXNzd29yZCJdfQ.b3gMXU7kVYl9iy1d6FFRUsiDj4OrQwftchVVJ-6hlhA"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">43199</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"scim.userids cloud_controller.read password.write cloud_controller.write openid"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"jti"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"01c94746-e2a8-4cfe-aaf1-cc37773d84c6"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td>String</td>
<td>Required</td>
<td>the type of authentication being used to obtain the token, in this case <code class="prettyprint">refresh_token</code></td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>client_secret</td>
<td>String</td>
<td>Required</td>
<td>the secret passphrase configured for the OAuth client</td>
</tr>
<tr>
<td>refresh_token</td>
<td>String</td>
<td>Required</td>
<td>the refresh_token that was returned along with the access token.</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>String</td>
<td>the access token</td>
</tr>
<tr>
<td>refresh_token</td>
<td>String</td>
<td>the refresh token</td>
</tr>
<tr>
<td>token_type</td>
<td>String</td>
<td>the type of the access token issued, i.e. <code class="prettyprint">bearer</code></td>
</tr>
<tr>
<td>expires_in</td>
<td>Number</td>
<td>number of seconds until token expiry</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>space-delimited list of scopes authorized by the user for this client</td>
</tr>
<tr>
<td>jti</td>
<td>String</td>
<td>a globally unique identifier for this token</td>
</tr>
</tbody></table>

<h2 id="openid-connect">OpenID Connect</h2>

<p>The token endpoint can provide an ID token as defined by OpenID Connect.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/oauth/token'</span> -i -X POST -H <span class="s1">'Accept: application/json'</span> -H <span class="s1">'Content-Type: application/x-www-form-urlencoded'</span> -d <span class="s1">'client_id=login&amp;client_secret=loginsecret&amp;grant_type=authorization_code&amp;response_type=id_token&amp;code=OAp3sX&amp;redirect_uri=https%3A%2F%2Fuaa.cloudfoundry.com%2Fredirect%2Fcf'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/oauth/token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

client_id=login&amp;client_secret=loginsecret&amp;grant_type=authorization_code&amp;response_type=id_token&amp;code=OAp3sX&amp;redirect_uri=https%3A%2F%2Fuaa.cloudfoundry.com%2Fredirect%2Fcf
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-store</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">2421</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiJiZTY5MjAwNy00NDIwLTRlODEtOTk2Ny1lMDI2MTY5NmM0MTciLCJzdWIiOiIxNTA0MTFjNC0yZjg4LTQwODQtODhiNC0zNWFiODhhZjFhYmUiLCJzY29wZSI6WyJvcGVuaWQiLCJvYXV0aC5hcHByb3ZhbHMiXSwiY2xpZW50X2lkIjoibG9naW4iLCJjaWQiOiJsb2dpbiIsImF6cCI6ImxvZ2luIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInVzZXJfaWQiOiIxNTA0MTFjNC0yZjg4LTQwODQtODhiNC0zNWFiODhhZjFhYmUiLCJvcmlnaW4iOiJ1YWEiLCJ1c2VyX25hbWUiOiJNUGIwdXNAdGVzdC5vcmciLCJlbWFpbCI6Ik1QYjB1c0B0ZXN0Lm9yZyIsImF1dGhfdGltZSI6MTQ1OTM3NjY0NywicmV2X3NpZyI6IjY0YjVjNmFkIiwiaWF0IjoxNDU5Mzc2NjQ3LCJleHAiOjE0NTk0MTk4NDcsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsib3BlbmlkIiwibG9naW4iLCJvYXV0aCJdfQ.Iso0PDyomLMj1IHJHrNEmp6u8A8BdAjPmGO8edWZ_I8"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"token_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"id_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiIxNTA0MTFjNC0yZjg4LTQwODQtODhiNC0zNWFiODhhZjFhYmUiLCJ1c2VyX25hbWUiOiJNUGIwdXNAdGVzdC5vcmciLCJvcmlnaW4iOiJ1YWEiLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiY2xpZW50X2lkIjoibG9naW4iLCJhdWQiOlsibG9naW4iXSwiemlkIjoidWFhIiwiZ3JhbnRfdHlwZSI6ImF1dGhvcml6YXRpb25fY29kZSIsInVzZXJfaWQiOiIxNTA0MTFjNC0yZjg4LTQwODQtODhiNC0zNWFiODhhZjFhYmUiLCJhenAiOiJsb2dpbiIsInNjb3BlIjpbIm9wZW5pZCJdLCJhdXRoX3RpbWUiOjE0NTkzNzY2NDcsImV4cCI6MTQ1OTQxOTg0NywiaWF0IjoxNDU5Mzc2NjQ3LCJqdGkiOiJiZTY5MjAwNy00NDIwLTRlODEtOTk2Ny1lMDI2MTY5NmM0MTciLCJlbWFpbCI6Ik1QYjB1c0B0ZXN0Lm9yZyIsInJldl9zaWciOiI2NGI1YzZhZCIsImNpZCI6ImxvZ2luIn0.ZhvI71PqN_Y7n32vnsE6p_hKxnOKhenkKc4_nQVZADU"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"refresh_token"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIxNWZmNjc2NC1hNDU5LTRkYmQtOTIzOS1iZjU0NzQwZDQxNmItciIsInN1YiI6IjE1MDQxMWM0LTJmODgtNDA4NC04OGI0LTM1YWI4OGFmMWFiZSIsInNjb3BlIjpbIm9wZW5pZCIsIm9hdXRoLmFwcHJvdmFscyJdLCJpYXQiOjE0NTkzNzY2NDcsImV4cCI6MTQ2MTk2ODY0NywiY2lkIjoibG9naW4iLCJjbGllbnRfaWQiOiJsb2dpbiIsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJncmFudF90eXBlIjoiYXV0aG9yaXphdGlvbl9jb2RlIiwidXNlcl9uYW1lIjoiTVBiMHVzQHRlc3Qub3JnIiwib3JpZ2luIjoidWFhIiwidXNlcl9pZCI6IjE1MDQxMWM0LTJmODgtNDA4NC04OGI0LTM1YWI4OGFmMWFiZSIsInJldl9zaWciOiI2NGI1YzZhZCIsImF1ZCI6WyJvcGVuaWQiLCJsb2dpbiIsIm9hdXRoIl19.Kwf8C6KR7piZ70Nk4k_U1UF9qnNydTQnXXQTIzXlAiY"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"expires_in"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">43199</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"openid oauth.approvals"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"jti"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"be692007-4420-4e81-9967-e0261696c417"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>response_type</td>
<td>String</td>
<td>Required</td>
<td>the type of token that should be issued.</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>Required</td>
<td>a unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>redirect_uri</td>
<td>String</td>
<td>Required if provided on authorization request</td>
<td>redirection URI to which the authorization server will send the user-agent back once access is granted (or denied)</td>
</tr>
<tr>
<td>code</td>
<td>String</td>
<td>Required</td>
<td>the authorization code, obtained from /oauth/authorize, issued for the user</td>
</tr>
<tr>
<td>grant_type</td>
<td>String</td>
<td>Required</td>
<td>the type of authentication being used to obtain the token, in this case <code class="prettyprint">authorization_code</code></td>
</tr>
<tr>
<td>client_secret</td>
<td>String</td>
<td>Required</td>
<td>the secret passphrase configured for the OAuth client</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>String</td>
<td>the access token for the user to whom the authorization code was issued</td>
</tr>
<tr>
<td>id_token</td>
<td>String</td>
<td>the OpenID Connect ID token for the user to whom the authorization code was issued</td>
</tr>
<tr>
<td>token_type</td>
<td>String</td>
<td>the type of the access token issued, i.e. <code class="prettyprint">bearer</code></td>
</tr>
<tr>
<td>expires_in</td>
<td>Number</td>
<td>number of seconds until token expiry</td>
</tr>
<tr>
<td>scope</td>
<td>String</td>
<td>space-delimited list of scopes authorized by the user for this client</td>
</tr>
<tr>
<td>refresh_token</td>
<td>String</td>
<td>an OAuth refresh token for refresh grants</td>
</tr>
<tr>
<td>jti</td>
<td>String</td>
<td>a globally unique identifier for this token</td>
</tr>
</tbody></table>

<h1 id="check-token">Check Token</h1>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/check_token'</span> -i -u <span class="s1">'app:appclientsecret'</span> -X POST -d <span class="s1">'token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI5NDk2MjUxNS0yMDAxLTQ1ZDQtODZjNC0wNGI4ZTYzNGNmZTUiLCJzdWIiOiI0NTg0Yjg2My03ZDBlLTQ2YzctYmI2OC01YjE5ZTljOGE2YzQiLCJzY29wZSI6WyJzY2ltLnVzZXJpZHMiLCJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiXSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiYXpwIjoiYXBwIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwidXNlcl9pZCI6IjQ1ODRiODYzLTdkMGUtNDZjNy1iYjY4LTViMTllOWM4YTZjNCIsIm9yaWdpbiI6InVhYSIsInVzZXJfbmFtZSI6Im1hcmlzc2EiLCJlbWFpbCI6Im1hcmlzc2FAdGVzdC5vcmciLCJhdXRoX3RpbWUiOjE0NTkzNzY2MjAsInJldl9zaWciOiJhZGQ3NjViZiIsImlhdCI6MTQ1OTM3NjYyMCwiZXhwIjoxNDU5NDE5ODIwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImFwcCIsInNjaW0iLCJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyIiwicGFzc3dvcmQiXX0.BX_9TbGNMthrye6RQZ95yQwoMunUs5Tmw1Sx2s-cfUU&amp;scopes=password.write%2Cscim.userids'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/check_token</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic YXBwOmFwcGNsaWVudHNlY3JldA==</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/x-www-form-urlencoded</span>

token=eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI5NDk2MjUxNS0yMDAxLTQ1ZDQtODZjNC0wNGI4ZTYzNGNmZTUiLCJzdWIiOiI0NTg0Yjg2My03ZDBlLTQ2YzctYmI2OC01YjE5ZTljOGE2YzQiLCJzY29wZSI6WyJzY2ltLnVzZXJpZHMiLCJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJwYXNzd29yZC53cml0ZSIsImNsb3VkX2NvbnRyb2xsZXIud3JpdGUiXSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiYXpwIjoiYXBwIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwidXNlcl9pZCI6IjQ1ODRiODYzLTdkMGUtNDZjNy1iYjY4LTViMTllOWM4YTZjNCIsIm9yaWdpbiI6InVhYSIsInVzZXJfbmFtZSI6Im1hcmlzc2EiLCJlbWFpbCI6Im1hcmlzc2FAdGVzdC5vcmciLCJhdXRoX3RpbWUiOjE0NTkzNzY2MjAsInJldl9zaWciOiJhZGQ3NjViZiIsImlhdCI6MTQ1OTM3NjYyMCwiZXhwIjoxNDU5NDE5ODIwLCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImFwcCIsInNjaW0iLCJvcGVuaWQiLCJjbG91ZF9jb250cm9sbGVyIiwicGFzc3dvcmQiXX0.BX_9TbGNMthrye6RQZ95yQwoMunUs5Tmw1Sx2s-cfUU&amp;scopes=password.write%2Cscim.userids
</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">669</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4584b863-7d0e-46c7-bb68-5b19e9c8a6c4"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"marissa"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"marissa@test.org"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"client_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"exp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459419820</span><span class="p">,</span><span class="w">
  </span><span class="nt">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"scim.userids"</span><span class="p">,</span><span class="w"> </span><span class="s2">"openid"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cloud_controller.read"</span><span class="p">,</span><span class="w"> </span><span class="s2">"password.write"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cloud_controller.write"</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nt">"jti"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"94962515-2001-45d4-86c4-04b8e634cfe5"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"aud"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w"> </span><span class="s2">"scim"</span><span class="p">,</span><span class="w"> </span><span class="s2">"openid"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cloud_controller"</span><span class="p">,</span><span class="w"> </span><span class="s2">"password"</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nt">"sub"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4584b863-7d0e-46c7-bb68-5b19e9c8a6c4"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"iss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8080/uaa/oauth/token"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"iat"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376620</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"grant_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"azp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"app"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"auth_time"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376620</span><span class="p">,</span><span class="w">
  </span><span class="nt">"zid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"rev_sig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"add765bf"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"origin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Uses basic authorization with base64(resource_server:shared_secret) assuming the caller (a resource server) is actually also a registered client and has <code class="prettyprint">uaa.resource</code> authority</td>
</tr>
</tbody></table>

<p><em>Request Parameters</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>String</td>
<td>Required</td>
<td>The token</td>
</tr>
<tr>
<td>scopes</td>
<td>Array</td>
<td>Optional</td>
<td>Comma-separated string of scopes to check if scopes are present on the token</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>String</td>
<td>Only applicable for user tokens</td>
</tr>
<tr>
<td>user_name</td>
<td>String</td>
<td>Only applicable for user tokens</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>Only applicable for user tokens</td>
</tr>
<tr>
<td>client_id</td>
<td>String</td>
<td>A unique string representing the registration information provided by the client</td>
</tr>
<tr>
<td>exp</td>
<td>Number</td>
<td><a href="https://tools.ietf.org/html/rfc7519#section-4.1.4">Expiration Time</a> Claim</td>
</tr>
<tr>
<td>authorities</td>
<td>Array</td>
<td>Only applicable for client tokens</td>
</tr>
<tr>
<td>scope</td>
<td>Array</td>
<td>Comma-delimited list of scopes authorized by the user for this client</td>
</tr>
<tr>
<td>jti</td>
<td>String</td>
<td><a href="https://tools.ietf.org/html/rfc7519#section-4.1.7">JWT ID</a> Claim</td>
</tr>
<tr>
<td>aud</td>
<td>Array</td>
<td><a href="https://tools.ietf.org/html/rfc7519#section-4.1.3">Audience</a> Claim</td>
</tr>
<tr>
<td>sub</td>
<td>String</td>
<td><a href="https://tools.ietf.org/html/rfc7519#section-4.1.2">Subject</a> Claim</td>
</tr>
<tr>
<td>iss</td>
<td>String</td>
<td><a href="https://tools.ietf.org/html/rfc7519#section-4.1.1">Issuer</a> Claim</td>
</tr>
<tr>
<td>iat</td>
<td>Number</td>
<td><a href="https://tools.ietf.org/html/rfc7519#section-4.1.6">Issued At</a> Claim</td>
</tr>
<tr>
<td>cid</td>
<td>String</td>
<td>See <code class="prettyprint">client_id</code></td>
</tr>
<tr>
<td>grant_type</td>
<td>String</td>
<td>The type of authentication being used to obtain the token, in this case <code class="prettyprint">password</code></td>
</tr>
<tr>
<td>azp</td>
<td>String</td>
<td>Authorized party</td>
</tr>
<tr>
<td>auth_time</td>
<td>Number</td>
<td>Only applicable for user tokens</td>
</tr>
<tr>
<td>zid</td>
<td>String</td>
<td>Zone ID</td>
</tr>
<tr>
<td>rev_sig</td>
<td>String</td>
<td>Revocation Signature - token revocation hash salted with at least client ID and client secret, and optionally various user values.</td>
</tr>
<tr>
<td>origin</td>
<td>String</td>
<td>Only applicable for user tokens</td>
</tr>
</tbody></table>

<h1 id="token-key-s">Token Key(s)</h1>

<h2 id="token-key">Token Key</h2>

<p>An endpoint which returns the JSON Web Token (JWT) key, used by the UAA to sign JWT access tokens, and to be used by authorized clients to verify that a token came from the UAA. The key is in JSON Web Key format. For complete information about JSON Web Keys, see <a href="https://tools.ietf.org/html/rfc7517">RFC 7517</a>. In the case when the token key is symmetric, signer key and verifier key are the same, then this call is authenticated with client credentials using the HTTP Basic method.</p>

<p>JWT signing keys are specified via the identity zone configuration (see <a href="#identity-zones">/identity-zones</a>). An identity zone token policy can be configured with multiple keys for purposes of key rotation. When adding a new key, set its ID as the <code class="prettyprint">activeKeyId</code> to use it to sign all new tokens. <a href="#check-token">/check_token</a> will continue to verify tokens signed with the previous signing key for as long as it is present in the <code class="prettyprint">keys</code> of the identity zone&rsquo;s token policy. Remove it to invalidate all those tokens.</p>

<h3 id="asymmetric">Asymmetric</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/token_key'</span> -i -u <span class="s1">'app:appclientsecret'</span> -H <span class="s1">'Accept: application/json'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/token_key</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic YXBwOmFwcGNsaWVudHNlY3JldA==</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">930</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"kid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"testKey"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"alg"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SHA256withRSA"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0m59l2u9iDnMbrXHfqkO\nrn2dVQ3vfBJqcDuFUK03d+1PZGbVlNCqnkpIJ8syFppW8ljnWweP7+LiWpRoz0I7\nfYb3d8TjhV86Y997Fl4DBrxgM6KTJOuE/uxnoDhZQ14LgOU2ckXjOzOdTsnGMKQB\nLCl0vpcXBtFLMaSbpv1ozi8h7DJyVZ6EnFQZUWGdgTMhDrmqevfx95U/16c5WBDO\nkqwIn7Glry9n9Suxygbf8g5AzpWcusZgDLIIZ7JTUldBb8qU2a0Dl4mvLZOn4wPo\njfj9Cw2QICsc5+Pwf21fP+hzf+1WSRHbnYv8uanRO0gZ8ekGaghM/2H6gqJbo2nI\nJwIDAQAB\n-----END PUBLIC KEY-----"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"kty"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"use"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sig"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"n"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ANJufZdrvYg5zG61x36pDq59nVUN73wSanA7hVCtN3ftT2Rm1ZTQqp5KSCfLMhaaVvJY51sHj+/i4lqUaM9CO32G93fE44VfOmPfexZeAwa8YDOikyTrhP7sZ6A4WUNeC4DlNnJF4zsznU7JxjCkASwpdL6XFwbRSzGkm6b9aM4vIewyclWehJxUGVFhnYEzIQ65qnr38feVP9enOVgQzpKsCJ+xpa8vZ/UrscoG3/IOQM6VnLrGYAyyCGeyU1JXQW/KlNmtA5eJry2Tp+MD6I34/QsNkCArHOfj8H9tXz/oc3/tVkkR252L/Lmp0TtIGfHpBmoITP9h+oKiW6NpyCc="</span><span class="p">,</span><span class="w">
  </span><span class="nt">"e"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AQAB"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Uses basic authorization with <code class="prettyprint">base64(resource_server:shared_secret)</code> assuming the caller is actually also a registered client. Not required, can be anonymous.</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kid</td>
<td>String</td>
<td>Key ID of key to be used for verification of the token.</td>
</tr>
<tr>
<td>alg</td>
<td>String</td>
<td>Encryption algorithm</td>
</tr>
<tr>
<td>value</td>
<td>String</td>
<td>Verifier key</td>
</tr>
<tr>
<td>kty</td>
<td>String</td>
<td>Key type (RSA)</td>
</tr>
<tr>
<td>use</td>
<td>String</td>
<td>Public key use parameter - identifies intended use of the public key. (defaults to &ldquo;sig&rdquo;)</td>
</tr>
<tr>
<td>n</td>
<td>String</td>
<td>RSA key modulus</td>
</tr>
<tr>
<td>e</td>
<td>String</td>
<td>RSA key public exponent</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized - Unregistered client or incorrect client secret</td>
</tr>
</tbody></table>

<h3 id="symmetric">Symmetric</h3>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/token_key'</span> -i -u <span class="s1">'app:appclientsecret'</span> -H <span class="s1">'Accept: application/json'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/token_key</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic YXBwOmFwcGNsaWVudHNlY3JldA==</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">100</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"kid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"testKey"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"alg"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"HMACSHA256"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"key"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"kty"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MAC"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"use"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sig"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Uses basic authorization with <code class="prettyprint">base64(resource_server:shared_secret)</code> assuming the caller (a resource server) is actually also a registered client and has <code class="prettyprint">uaa.resource</code> authority</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kid</td>
<td>String</td>
<td>Key ID of key to be used for verification of the token.</td>
</tr>
<tr>
<td>alg</td>
<td>String</td>
<td>Encryption algorithm</td>
</tr>
<tr>
<td>value</td>
<td>String</td>
<td>Verifier key</td>
</tr>
<tr>
<td>kty</td>
<td>String</td>
<td>Key type (MAC)</td>
</tr>
<tr>
<td>use</td>
<td>String</td>
<td>Public key use parameter - identifies intended use of the public key. (defaults to &ldquo;sig&rdquo;)</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized - Unregistered client or incorrect client secret</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Not a resource server (missing <code class="prettyprint">uaa.resource</code> scope)</td>
</tr>
</tbody></table>

<h2 id="token-keys">Token Keys</h2>

<p>An endpoint which returns the list of JWT keys. To support key rotation, this list specifies the IDs of all currently valid keys. JWT tokens issued by the UAA contain a <code class="prettyprint">kid</code> field, indicating which key should be used for verification of the token.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/token_keys'</span> -i -u <span class="s1">'app:appclientsecret'</span> -H <span class="s1">'Accept: application/json'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/token_keys</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Basic YXBwOmFwcGNsaWVudHNlY3JldA==</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">965</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"kid"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"testKey"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alg"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SHA256withRSA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA0m59l2u9iDnMbrXHfqkO\nrn2dVQ3vfBJqcDuFUK03d+1PZGbVlNCqnkpIJ8syFppW8ljnWweP7+LiWpRoz0I7\nfYb3d8TjhV86Y997Fl4DBrxgM6KTJOuE/uxnoDhZQ14LgOU2ckXjOzOdTsnGMKQB\nLCl0vpcXBtFLMaSbpv1ozi8h7DJyVZ6EnFQZUWGdgTMhDrmqevfx95U/16c5WBDO\nkqwIn7Glry9n9Suxygbf8g5AzpWcusZgDLIIZ7JTUldBb8qU2a0Dl4mvLZOn4wPo\njfj9Cw2QICsc5+Pwf21fP+hzf+1WSRHbnYv8uanRO0gZ8ekGaghM/2H6gqJbo2nI\nJwIDAQAB\n-----END PUBLIC KEY-----"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"kty"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"use"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sig"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"n"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ANJufZdrvYg5zG61x36pDq59nVUN73wSanA7hVCtN3ftT2Rm1ZTQqp5KSCfLMhaaVvJY51sHj+/i4lqUaM9CO32G93fE44VfOmPfexZeAwa8YDOikyTrhP7sZ6A4WUNeC4DlNnJF4zsznU7JxjCkASwpdL6XFwbRSzGkm6b9aM4vIewyclWehJxUGVFhnYEzIQ65qnr38feVP9enOVgQzpKsCJ+xpa8vZ/UrscoG3/IOQM6VnLrGYAyyCGeyU1JXQW/KlNmtA5eJry2Tp+MD6I34/QsNkCArHOfj8H9tXz/oc3/tVkkR252L/Lmp0TtIGfHpBmoITP9h+oKiW6NpyCc="</span><span class="p">,</span><span class="w">
    </span><span class="nt">"e"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"AQAB"</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Basic authorization with <code class="prettyprint">base64(resource_server:shared_secret)</code> assuming the caller (a resource server) is actually also a registered client and has <code class="prettyprint">uaa.resource</code> authority. Header not required (anonymous) for obtaining only asymmetric keys. <code class="prettyprint">uaa.resource</code> authority also not required for obtaining only asymmetric keys should you choose to provide this header.</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>keys.[].kid</td>
<td>String</td>
<td>Key ID of key to be used for verification of the token.</td>
</tr>
<tr>
<td>keys.[].alg</td>
<td>String</td>
<td>Encryption algorithm</td>
</tr>
<tr>
<td>keys.[].value</td>
<td>String</td>
<td>Verifier key</td>
</tr>
<tr>
<td>keys.[].kty</td>
<td>String</td>
<td>Key type (RSA or MAC)</td>
</tr>
<tr>
<td>keys.[].use</td>
<td>String</td>
<td>Public key use parameter - identifies intended use of the public key. (defaults to &ldquo;sig&rdquo;)</td>
</tr>
<tr>
<td>keys.[].n</td>
<td>String</td>
<td>RSA key modulus</td>
</tr>
<tr>
<td>keys.[].e</td>
<td>String</td>
<td>RSA key public exponent</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>401</td>
<td>Unauthorized - Unregistered client or incorrect client secret</td>
</tr>
</tbody></table>

<h1 id="identity-zones">Identity Zones</h1>

<p>The UAA supports multi tenancy. This is referred to as identity zones. An identity zones is accessed through a unique subdomain. If the standard UAA responds to <a href="https://uaa.10.244.0.34.xip.io">https://uaa.10.244.0.34.xip.io</a> a zone on this UAA would be accessed through <a href="https://testzone1.uaa.10.244.0.34.xip.io">https://testzone1.uaa.10.244.0.34.xip.io</a></p>

<blockquote>
<p>A zone contains a unique identifier as well as a unique subdomain:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="s2">"testzone1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subdomain"</span><span class="p">:</span><span class="s2">"testzone1"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"The Twiglet Zone[testzone1]"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="s2">"Like the Twilight Zone but tastier[testzone1]."</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created"</span><span class="p">:</span><span class="mi">1426258488910</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_modified"</span><span class="p">:</span><span class="mi">1426258488910</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>The UAA by default creates a default zone. This zone will always be present, the ID will always be <code class="prettyprint">uaa</code>, and the subdomain is blank:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subdomain"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"version"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The system zone for backwards compatibility"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"created"</span><span class="p">:</span><span class="w"> </span><span class="mi">946710000000</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_modified"</span><span class="p">:</span><span class="w"> </span><span class="mi">946710000000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<aside class="notice">
  Note that if you specify a subdomain in mixed or upper case for creation or update of an identity zone, it will be converted into lower case before stored in the database. This way the UAA has an easy way to query the database for a zone based on a hostname.
</aside>

<h2 id="creating-an-identity-zone">Creating an identity zone</h2>

<p>An identity zone is created using a <code class="prettyprint">POST</code> with an <code class="prettyprint">IdentityZone</code> object. If the object contains an id, this id will be used as the identifier, otherwise an identifier will be generated. Once a zone has been created, the UAA will start accepting requests on the subdomain defined in the <code class="prettyprint">subdomain</code> field of the identity zone.
When an Identity Zone is created, an internal Identity Provider is automatically created with the default password policy.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/identity-zones'</span> -i -X POST -H <span class="s1">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI4ODIwNDY0ZC0xNDA1LTRjOTItODkxMi1mNGUwOWQ0MzlhM2QiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMud3JpdGUiXSwiY2xpZW50X2lkIjoiaWRlbnRpdHkiLCJjaWQiOiJpZGVudGl0eSIsImF6cCI6ImlkZW50aXR5IiwiZ3JhbnRfdHlwZSI6ImNsaWVudF9jcmVkZW50aWFscyIsInJldl9zaWciOiJlYWFhNWQyNCIsImlhdCI6MTQ1OTM3NjYyOSwiZXhwIjoxNDU5NDE5ODI5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImlkZW50aXR5Iiwiem9uZXMiXX0.QNvfVciXipVaiUyzjCjje-ffQxgWA78DBxlIPe9t_MY'</span> -H <span class="s1">'Content-Type: application/json'</span> -d <span class="s1">'{
  "id" : "twiglet-create",
  "subdomain" : "twiglet-create",
  "config" : {
    "tokenPolicy" : {
      "accessTokenValidity" : -1,
      "refreshTokenValidity" : -1,
      "activeKeyId" : null,
      "keys" : {
        "exampleKeyId" : {
          "signingKey" : "s1gNiNg.K3y/t3XT"
        }
      }
    },
    "samlConfig" : {
      "assertionSigned" : true,
      "requestSigned" : true,
      "wantAssertionSigned" : false,
      "wantAuthnRequestSigned" : false,
      "assertionTimeToLiveSeconds" : 600,
      "certificate" : null,
      "privateKey" : null,
      "privateKeyPassword" : null
    },
    "links" : {
      "logout" : {
        "redirectUrl" : "/login",
        "redirectParameterName" : "redirect",
        "disableRedirectParameter" : true,
        "whitelist" : null
      },
      "selfService" : {
        "selfServiceLinksEnabled" : true,
        "signup" : "/create_account",
        "passwd" : "/forgot_password"
      }
    },
    "prompts" : [ {
      "name" : "username",
      "type" : "text",
      "text" : "Email"
    }, {
      "name" : "password",
      "type" : "password",
      "text" : "Password"
    }, {
      "name" : "passcode",
      "type" : "password",
      "text" : "One Time Code (Get on at /passcode)"
    } ]
  },
  "name" : "The Twiglet Zone",
  "version" : 0,
  "description" : "Like the Twilight Zone but tastier.",
  "created" : 1459376629668,
  "last_modified" : 1459376629668
}'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">POST</span> <span class="nn">/identity-zones</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI4ODIwNDY0ZC0xNDA1LTRjOTItODkxMi1mNGUwOWQ0MzlhM2QiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMud3JpdGUiXSwiY2xpZW50X2lkIjoiaWRlbnRpdHkiLCJjaWQiOiJpZGVudGl0eSIsImF6cCI6ImlkZW50aXR5IiwiZ3JhbnRfdHlwZSI6ImNsaWVudF9jcmVkZW50aWFscyIsInJldl9zaWciOiJlYWFhNWQyNCIsImlhdCI6MTQ1OTM3NjYyOSwiZXhwIjoxNDU5NDE5ODI5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImlkZW50aXR5Iiwiem9uZXMiXX0.QNvfVciXipVaiUyzjCjje-ffQxgWA78DBxlIPe9t_MY</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1439</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-create"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-create"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"exampleKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"signingKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"s1gNiNg.K3y/t3XT"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Like the Twilight Zone but tastier."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629668</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629668</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1439</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-create"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-create"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"exampleKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"signingKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"s1gNiNg.K3y/t3XT"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Like the Twilight Zone but tastier."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629681</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629681</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Bearer token containing <code class="prettyprint">zones.write</code> or <code class="prettyprint">zones.&lt;zone id&gt;.admin</code></td>
</tr>
</tbody></table>

<p><em>Request and Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Required</td>
<td>Unique ID of the identity zone</td>
</tr>
<tr>
<td>subdomain</td>
<td>String</td>
<td>Required</td>
<td>Unique subdomain for the running instance. May only contain legal characters for a subdomain name.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Required</td>
<td>Human-readable zone name</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Optional</td>
<td>Description of the zone</td>
</tr>
<tr>
<td>version</td>
<td>Number</td>
<td>Optional</td>
<td>Reserved for future use of E-Tag versioning</td>
</tr>
<tr>
<td>config.tokenPolicy</td>
<td>Object</td>
<td>Optional</td>
<td>Various fields pertaining to the JWT access and refresh tokens.</td>
</tr>
<tr>
<td>config.tokenPolicy.activeKeyId</td>
<td>String</td>
<td>Required if <code class="prettyprint">config.tokenPolicy.keys</code> are set</td>
<td>The ID for the key that is being used to sign tokens</td>
</tr>
<tr>
<td>config.tokenPolicy.keys</td>
<td>Object</td>
<td>Optional</td>
<td>Keys which will be used to sign the token</td>
</tr>
<tr>
<td>config.tokenPolicy.accessTokenValidity</td>
<td>Number</td>
<td>Optional</td>
<td>Time in seconds between when a access token is issued and when it expires. Defaults to global <code class="prettyprint">accessTokenValidity</code></td>
</tr>
<tr>
<td>config.tokenPolicy.refreshTokenValidity</td>
<td>Number</td>
<td>Optional</td>
<td>Time in seconds between when a refresh token is issued and when it expires. Defaults to global <code class="prettyprint">refreshTokenValidity</code></td>
</tr>
<tr>
<td>config.samlConfig.assertionSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>If <code class="prettyprint">true</code>, the SAML provider will sign all assertions</td>
</tr>
<tr>
<td>config.samlConfig.wantAssertionSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, all assertions received by the SAML provider must be signed. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.requestSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, the service provider will sign all outgoing authentication requests. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.wantAuthnRequestSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>If <code class="prettyprint">true</code>, the authentication request from the partner service provider must be signed.</td>
</tr>
<tr>
<td>config.samlConfig.assertionTimeToLiveSeconds</td>
<td>Number</td>
<td>Optional</td>
<td>The lifetime of a SAML assertion in seconds. Defaults to 600.</td>
</tr>
<tr>
<td>config.samlConfig.certificate</td>
<td>String</td>
<td>Optional</td>
<td>Exposed SAML metadata property. The certificate used to sign all communications.</td>
</tr>
<tr>
<td>config.samlConfig.privateKey</td>
<td>String</td>
<td>Optional</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key.</td>
</tr>
<tr>
<td>config.samlConfig.privateKeyPassword</td>
<td>String</td>
<td>Optional</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key password. Reserved for future use.</td>
</tr>
<tr>
<td>config.links.logout.redirectUrl</td>
<td>String</td>
<td>Optional</td>
<td>Logout redirect url</td>
</tr>
<tr>
<td>config.links.logout.redirectParameterName</td>
<td>String</td>
<td>Optional</td>
<td>Changes the name of the redirect parameter</td>
</tr>
<tr>
<td>config.links.logout.disableRedirectParameter</td>
<td>Boolean</td>
<td>Optional</td>
<td>Whether or not to allow the redirect parameter on logout</td>
</tr>
<tr>
<td>config.links.logout.whitelist</td>
<td>Array</td>
<td>Optional</td>
<td>List of allowed whitelist redirects</td>
</tr>
<tr>
<td>config.links.selfService.selfServiceLinksEnabled</td>
<td>Boolean</td>
<td>Optional</td>
<td>Whether or not users are allowed to sign up or reset their passwords via the UI</td>
</tr>
<tr>
<td>config.links.selfService.signup</td>
<td>String</td>
<td>Optional</td>
<td>Where users are directed upon clicking the account creation link</td>
</tr>
<tr>
<td>config.links.selfService.passwd</td>
<td>String</td>
<td>Optional</td>
<td>Where users are directed upon clicking the password reset link</td>
</tr>
<tr>
<td>config.prompts[]</td>
<td>Array</td>
<td>Optional</td>
<td>List of fields that users are prompted for to login. Defaults to username, password, and passcode.</td>
</tr>
<tr>
<td>config.prompts[].name</td>
<td>String</td>
<td>Optional</td>
<td>Name of field</td>
</tr>
<tr>
<td>config.prompts[].type</td>
<td>String</td>
<td>Optional</td>
<td>What kind of field this is (e.g. text or password)</td>
</tr>
<tr>
<td>config.prompts[].text</td>
<td>String</td>
<td>Optional</td>
<td>Actual text displayed on prompt for field</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - Invalid token</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Insufficient scope (Zones can only be created by being authenticated in the default zone.)</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity - Invalid zone details</td>
</tr>
</tbody></table>

<blockquote>
<p>Sequential example of creating a zone and creating an admin client in that zone:</p>
</blockquote>
<pre class="highlight shell"><code>uaac target http://localhost:8080/uaa

uaac token client get admin -s adminsecret

uaac client update admin --authorities <span class="s2">"uaa.admin,clients.read,clients.write,clients.secret,scim.read,scim.write,clients.admin,zones.testzone1.admin,zones.write"</span>

uaac token client get admin -s adminsecret

uaac -t curl -XPOST -H<span class="s2">"Content-Type:application/json"</span> -H<span class="s2">"Accept:application/json"</span> --data <span class="s1">'{ "id":"testzone1", "subdomain":"testzone1", "name":"The Twiglet Zone[testzone1]", "version":0, "description":"Like the Twilight Zone but tastier[testzone1]."}'</span> /identity-zones

uaac -t curl -H<span class="s2">"X-Identity-Zone-Id:testzone1"</span> -XPOST -H<span class="s2">"Content-Type:application/json"</span> -H<span class="s2">"Accept:application/json"</span> --data <span class="s1">'{ "client_id" : "admin", "client_secret" : "adminsecret", "scope" : ["uaa.none"], "resource_ids" : ["none"], "authorities" : ["uaa.admin","clients.read","clients.write","clients.secret","scim.read","scim.write","clients.admin"], "authorized_grant_types" : ["client_credentials"]}'</span> /oauth/clients

uaac target http://testzone1.localhost:8080/uaa

uaac token client get admin -s adminsecret

uaac token decode
</code></pre>

<h2 id="retrieving-an-identity-zone">Retrieving an identity zone</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/identity-zones/twiglet-get'</span> -i -H <span class="s1">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI0ZTBhY2U3ZS0yMWI4LTRiNjYtOGZjMy1hMGRkOWI0ZjllOWYiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMucmVhZCJdLCJjbGllbnRfaWQiOiJpZGVudGl0eSIsImNpZCI6ImlkZW50aXR5IiwiYXpwIjoiaWRlbnRpdHkiLCJncmFudF90eXBlIjoiY2xpZW50X2NyZWRlbnRpYWxzIiwicmV2X3NpZyI6ImVhYWE1ZDI0IiwiaWF0IjoxNDU5Mzc2NjI5LCJleHAiOjE0NTk0MTk4MjksImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsiaWRlbnRpdHkiLCJ6b25lcyJdfQ.wCRQZuOP4UIThqVVFpo3r5nYJqIoz9nCizrxvwOiKGs'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/identity-zones/twiglet-get</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI0ZTBhY2U3ZS0yMWI4LTRiNjYtOGZjMy1hMGRkOWI0ZjllOWYiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMucmVhZCJdLCJjbGllbnRfaWQiOiJpZGVudGl0eSIsImNpZCI6ImlkZW50aXR5IiwiYXpwIjoiaWRlbnRpdHkiLCJncmFudF90eXBlIjoiY2xpZW50X2NyZWRlbnRpYWxzIiwicmV2X3NpZyI6ImVhYWE1ZDI0IiwiaWF0IjoxNDU5Mzc2NjI5LCJleHAiOjE0NTk0MTk4MjksImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsiaWRlbnRpdHkiLCJ6b25lcyJdfQ.wCRQZuOP4UIThqVVFpo3r5nYJqIoz9nCizrxvwOiKGs</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1289</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-get"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-get"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629556</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629556</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Path Parameters</em></p>

<p>/identity-zones/{id}</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Unique ID of the identity zone to retrieve</td>
</tr>
</tbody></table>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Bearer token containing <code class="prettyprint">zones.read</code> or <code class="prettyprint">zones.&lt;zone id&gt;.admin</code> or <code class="prettyprint">zones.&lt;zone id&gt;.read</code></td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Unique ID of the identity zone</td>
</tr>
<tr>
<td>subdomain</td>
<td>String</td>
<td>Unique subdomain for the running instance. May only contain legal characters for a subdomain name.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Human-readable zone name</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Description of the zone</td>
</tr>
<tr>
<td>version</td>
<td>Number</td>
<td>Reserved for future use of E-Tag versioning</td>
</tr>
<tr>
<td>config.tokenPolicy</td>
<td>Object</td>
<td>Various fields pertaining to the JWT access and refresh tokens.</td>
</tr>
<tr>
<td>config.tokenPolicy.activeKeyId</td>
<td>String</td>
<td>The ID for the key that is being used to sign tokens</td>
</tr>
<tr>
<td>config.tokenPolicy.keys</td>
<td>Object</td>
<td>Keys which will be used to sign the token</td>
</tr>
<tr>
<td>config.tokenPolicy.accessTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a access token is issued and when it expires. Defaults to global <code class="prettyprint">accessTokenValidity</code></td>
</tr>
<tr>
<td>config.tokenPolicy.refreshTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a refresh token is issued and when it expires. Defaults to global <code class="prettyprint">refreshTokenValidity</code></td>
</tr>
<tr>
<td>config.samlConfig.assertionSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the SAML provider will sign all assertions</td>
</tr>
<tr>
<td>config.samlConfig.wantAssertionSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, all assertions received by the SAML provider must be signed. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.requestSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, the service provider will sign all outgoing authentication requests. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.wantAuthnRequestSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the authentication request from the partner service provider must be signed.</td>
</tr>
<tr>
<td>config.samlConfig.assertionTimeToLiveSeconds</td>
<td>Number</td>
<td>The lifetime of a SAML assertion in seconds. Defaults to 600.</td>
</tr>
<tr>
<td>config.samlConfig.certificate</td>
<td>String</td>
<td>Exposed SAML metadata property. The certificate used to sign all communications.</td>
</tr>
<tr>
<td>config.samlConfig.privateKey</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key.</td>
</tr>
<tr>
<td>config.samlConfig.privateKeyPassword</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key password. Reserved for future use.</td>
</tr>
<tr>
<td>config.links.logout.redirectUrl</td>
<td>String</td>
<td>Logout redirect url</td>
</tr>
<tr>
<td>config.links.logout.redirectParameterName</td>
<td>String</td>
<td>Changes the name of the redirect parameter</td>
</tr>
<tr>
<td>config.links.logout.disableRedirectParameter</td>
<td>Boolean</td>
<td>Whether or not to allow the redirect parameter on logout</td>
</tr>
<tr>
<td>config.links.logout.whitelist</td>
<td>Array</td>
<td>List of allowed whitelist redirects</td>
</tr>
<tr>
<td>config.links.selfService.selfServiceLinksEnabled</td>
<td>Boolean</td>
<td>Whether or not users are allowed to sign up or reset their passwords via the UI</td>
</tr>
<tr>
<td>config.links.selfService.signup</td>
<td>String</td>
<td>Where users are directed upon clicking the account creation link</td>
</tr>
<tr>
<td>config.links.selfService.passwd</td>
<td>String</td>
<td>Where users are directed upon clicking the password reset link</td>
</tr>
<tr>
<td>config.prompts[]</td>
<td>Array</td>
<td>List of fields that users are prompted for to login. Defaults to username, password, and passcode.</td>
</tr>
<tr>
<td>config.prompts[].name</td>
<td>String</td>
<td>Name of field</td>
</tr>
<tr>
<td>config.prompts[].type</td>
<td>String</td>
<td>What kind of field this is (e.g. text or password)</td>
</tr>
<tr>
<td>config.prompts[].text</td>
<td>String</td>
<td>Actual text displayed on prompt for field</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - Invalid token</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Insufficient scope</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - Zone does not exist</td>
</tr>
</tbody></table>

<h2 id="retrieving-all-identity-zones">Retrieving all identity zones</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/identity-zones'</span> -i -H <span class="s1">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI0NTY1MWJlNy0yMGNjLTRlNGItYTYxOC04MmRlNjcwYTU0OTMiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMucmVhZCJdLCJjbGllbnRfaWQiOiJpZGVudGl0eSIsImNpZCI6ImlkZW50aXR5IiwiYXpwIjoiaWRlbnRpdHkiLCJncmFudF90eXBlIjoiY2xpZW50X2NyZWRlbnRpYWxzIiwicmV2X3NpZyI6ImVhYWE1ZDI0IiwiaWF0IjoxNDU5Mzc2NjI4LCJleHAiOjE0NTk0MTk4MjgsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsiaWRlbnRpdHkiLCJ6b25lcyJdfQ.7GxFHmb9wVe_g7XOyZtp1f0dVpO6nBIeXLCyYeP7SYk'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">GET</span> <span class="nn">/identity-zones</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiI0NTY1MWJlNy0yMGNjLTRlNGItYTYxOC04MmRlNjcwYTU0OTMiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMucmVhZCJdLCJjbGllbnRfaWQiOiJpZGVudGl0eSIsImNpZCI6ImlkZW50aXR5IiwiYXpwIjoiaWRlbnRpdHkiLCJncmFudF90eXBlIjoiY2xpZW50X2NyZWRlbnRpYWxzIiwicmV2X3NpZyI6ImVhYWE1ZDI0IiwiaWF0IjoxNDU5Mzc2NjI4LCJleHAiOjE0NTk0MTk4MjgsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJ6aWQiOiJ1YWEiLCJhdWQiOlsiaWRlbnRpdHkiLCJ6b25lcyJdfQ.7GxFHmb9wVe_g7XOyZtp1f0dVpO6nBIeXLCyYeP7SYk</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">6111</span>

<span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-get-1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-get-1"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376628860</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376628860</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-get-2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-get-2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376628922</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376628922</span><span class="w">
</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">43200</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2592000</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"\n-----BEGIN CERTIFICATE-----\nMIIDSTCCArKgAwIBAgIBADANBgkqhkiG9w0BAQQFADB8MQswCQYDVQQGEwJhdzEO\nMAwGA1UECBMFYXJ1YmExDjAMBgNVBAoTBWFydWJhMQ4wDAYDVQQHEwVhcnViYTEO\nMAwGA1UECxMFYXJ1YmExDjAMBgNVBAMTBWFydWJhMR0wGwYJKoZIhvcNAQkBFg5h\ncnViYUBhcnViYS5hcjAeFw0xNTExMjAyMjI2MjdaFw0xNjExMTkyMjI2MjdaMHwx\nCzAJBgNVBAYTAmF3MQ4wDAYDVQQIEwVhcnViYTEOMAwGA1UEChMFYXJ1YmExDjAM\nBgNVBAcTBWFydWJhMQ4wDAYDVQQLEwVhcnViYTEOMAwGA1UEAxMFYXJ1YmExHTAb\nBgkqhkiG9w0BCQEWDmFydWJhQGFydWJhLmFyMIGfMA0GCSqGSIb3DQEBAQUAA4GN\nADCBiQKBgQDHtC5gUXxBKpEqZTLkNvFwNGnNIkggNOwOQVNbpO0WVHIivig5L39W\nqS9u0hnA+O7MCA/KlrAR4bXaeVVhwfUPYBKIpaaTWFQR5cTR1UFZJL/OF9vAfpOw\nznoD66DDCnQVpbCjtDYWX+x6imxn8HCYxhMol6ZnTbSsFW6VZjFMjQIDAQABo4Ha\nMIHXMB0GA1UdDgQWBBTx0lDzjH/iOBnOSQaSEWQLx1syGDCBpwYDVR0jBIGfMIGc\ngBTx0lDzjH/iOBnOSQaSEWQLx1syGKGBgKR+MHwxCzAJBgNVBAYTAmF3MQ4wDAYD\nVQQIEwVhcnViYTEOMAwGA1UEChMFYXJ1YmExDjAMBgNVBAcTBWFydWJhMQ4wDAYD\nVQQLEwVhcnViYTEOMAwGA1UEAxMFYXJ1YmExHTAbBgkqhkiG9w0BCQEWDmFydWJh\nQGFydWJhLmFyggEAMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEEBQADgYEAYvBJ\n0HOZbbHClXmGUjGs+GS+xC1FO/am2suCSYqNB9dyMXfOWiJ1+TLJk+o/YZt8vuxC\nKdcZYgl4l/L6PxJ982SRhc83ZW2dkAZI4M0/Ud3oePe84k8jm3A7EvH5wi5hvCkK\nRpuRBwn3Ei+jCRouxTbzKPsuCVB+1sNyxMTXzf0=\n-----END CERTIFICATE-----\n                "</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"\n-----BEGIN RSA PRIVATE KEY-----\nMIICXQIBAAKBgQDHtC5gUXxBKpEqZTLkNvFwNGnNIkggNOwOQVNbpO0WVHIivig5\nL39WqS9u0hnA+O7MCA/KlrAR4bXaeVVhwfUPYBKIpaaTWFQR5cTR1UFZJL/OF9vA\nfpOwznoD66DDCnQVpbCjtDYWX+x6imxn8HCYxhMol6ZnTbSsFW6VZjFMjQIDAQAB\nAoGAVOj2Yvuigi6wJD99AO2fgF64sYCm/BKkX3dFEw0vxTPIh58kiRP554Xt5ges\n7ZCqL9QpqrChUikO4kJ+nB8Uq2AvaZHbpCEUmbip06IlgdA440o0r0CPo1mgNxGu\nlhiWRN43Lruzfh9qKPhleg2dvyFGQxy5Gk6KW/t8IS4x4r0CQQD/dceBA+Ndj3Xp\nubHfxqNz4GTOxndc/AXAowPGpge2zpgIc7f50t8OHhG6XhsfJ0wyQEEvodDhZPYX\nkKBnXNHzAkEAyCA76vAwuxqAd3MObhiebniAU3SnPf2u4fdL1EOm92dyFs1JxyyL\ngu/DsjPjx6tRtn4YAalxCzmAMXFSb1qHfwJBAM3qx3z0gGKbUEWtPHcP7BNsrnWK\nvw6By7VC8bk/ffpaP2yYspS66Le9fzbFwoDzMVVUO/dELVZyBnhqSRHoXQcCQQCe\nA2WL8S5o7Vn19rC0GVgu3ZJlUrwiZEVLQdlrticFPXaFrn3Md82ICww3jmURaKHS\nN+l4lnMda79eSp3OMmq9AkA0p79BvYsLshUJJnvbk76pCjR28PK4dV1gSDUEqQMB\nqy45ptdwJLqLJCeNoR0JUcDNIRhOCuOPND7pcMtX6hI/\n-----END RSA PRIVATE KEY-----\n                "</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code ( Get one at http://localhost:8080/uaa/passcode )"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"uaa"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The system zone for backwards compatibility"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">946684800000</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376625702</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Bearer token containing <code class="prettyprint">zones.read</code> or <code class="prettyprint">zones.&lt;zone id&gt;.admin</code></td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>[].id</td>
<td>String</td>
<td>Unique ID of the identity zone</td>
</tr>
<tr>
<td>[].subdomain</td>
<td>String</td>
<td>Unique subdomain for the running instance. May only contain legal characters for a subdomain name.</td>
</tr>
<tr>
<td>[].name</td>
<td>String</td>
<td>Human-readable zone name</td>
</tr>
<tr>
<td>[].description</td>
<td>String</td>
<td>Description of the zone</td>
</tr>
<tr>
<td>[].version</td>
<td>Number</td>
<td>Reserved for future use of E-Tag versioning</td>
</tr>
<tr>
<td>[].config.tokenPolicy</td>
<td>Object</td>
<td>Various fields pertaining to the JWT access and refresh tokens.</td>
</tr>
<tr>
<td>[].config.tokenPolicy.activeKeyId</td>
<td>String</td>
<td>The ID for the key that is being used to sign tokens</td>
</tr>
<tr>
<td>[].config.tokenPolicy.keys</td>
<td>Object</td>
<td>Keys which will be used to sign the token</td>
</tr>
<tr>
<td>[].config.tokenPolicy.accessTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a access token is issued and when it expires. Defaults to global <code class="prettyprint">accessTokenValidity</code></td>
</tr>
<tr>
<td>[].config.tokenPolicy.refreshTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a refresh token is issued and when it expires. Defaults to global <code class="prettyprint">refreshTokenValidity</code></td>
</tr>
<tr>
<td>[].config.samlConfig.assertionSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the SAML provider will sign all assertions</td>
</tr>
<tr>
<td>[].config.samlConfig.wantAssertionSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, all assertions received by the SAML provider must be signed. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>[].config.samlConfig.requestSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, the service provider will sign all outgoing authentication requests. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>[].config.samlConfig.wantAuthnRequestSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the authentication request from the partner service provider must be signed.</td>
</tr>
<tr>
<td>[].config.samlConfig.assertionTimeToLiveSeconds</td>
<td>Number</td>
<td>The lifetime of a SAML assertion in seconds. Defaults to 600.</td>
</tr>
<tr>
<td>[].config.samlConfig.certificate</td>
<td>String</td>
<td>Exposed SAML metadata property. The certificate used to sign all communications.</td>
</tr>
<tr>
<td>[].config.samlConfig.privateKey</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key.</td>
</tr>
<tr>
<td>[].config.samlConfig.privateKeyPassword</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key password. Reserved for future use.</td>
</tr>
<tr>
<td>[].config.links.logout.redirectUrl</td>
<td>String</td>
<td>Logout redirect url</td>
</tr>
<tr>
<td>[].config.links.logout.redirectParameterName</td>
<td>String</td>
<td>Changes the name of the redirect parameter</td>
</tr>
<tr>
<td>[].config.links.logout.disableRedirectParameter</td>
<td>Boolean</td>
<td>Whether or not to allow the redirect parameter on logout</td>
</tr>
<tr>
<td>[].config.links.logout.whitelist</td>
<td>Array</td>
<td>List of allowed whitelist redirects</td>
</tr>
<tr>
<td>[].config.links.selfService.selfServiceLinksEnabled</td>
<td>Boolean</td>
<td>Whether or not users are allowed to sign up or reset their passwords via the UI</td>
</tr>
<tr>
<td>[].config.links.selfService.signup</td>
<td>String</td>
<td>Where users are directed upon clicking the account creation link</td>
</tr>
<tr>
<td>[].config.links.selfService.passwd</td>
<td>String</td>
<td>Where users are directed upon clicking the password reset link</td>
</tr>
<tr>
<td>[].config.prompts[]</td>
<td>Array</td>
<td>List of fields that users are prompted for to login. Defaults to username, password, and passcode.</td>
</tr>
<tr>
<td>[].config.prompts[].name</td>
<td>String</td>
<td>List of fields that users are prompted for to login. Defaults to username, password, and passcode.</td>
</tr>
<tr>
<td>[].config.prompts[].type</td>
<td>String</td>
<td>What kind of field this is (e.g. text or password)</td>
</tr>
<tr>
<td>[].config.prompts[].text</td>
<td>String</td>
<td>Actual text displayed on prompt for field</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - Invalid token</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Insufficient scope</td>
</tr>
</tbody></table>

<h2 id="updating-an-identity-zone">Updating an Identity Zone</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/identity-zones/twiglet-update'</span> -i -X PUT -H <span class="s1">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiJlZTQ2MGE3Mi1lOTUxLTQwZjItYmIyYi0xZjE2MzA2ZGU5YzAiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMud3JpdGUiXSwiY2xpZW50X2lkIjoiaWRlbnRpdHkiLCJjaWQiOiJpZGVudGl0eSIsImF6cCI6ImlkZW50aXR5IiwiZ3JhbnRfdHlwZSI6ImNsaWVudF9jcmVkZW50aWFscyIsInJldl9zaWciOiJlYWFhNWQyNCIsImlhdCI6MTQ1OTM3NjYyOSwiZXhwIjoxNDU5NDE5ODI5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImlkZW50aXR5Iiwiem9uZXMiXX0.LcJwOPjPSgpi8OpXKNeYXZ6v9Xn6BSAhv0rhgC3oXLA'</span> -H <span class="s1">'Content-Type: application/json'</span> -d <span class="s1">'{
  "subdomain" : "twiglet-update",
  "config" : {
    "tokenPolicy" : {
      "accessTokenValidity" : -1,
      "refreshTokenValidity" : -1,
      "activeKeyId" : null,
      "keys" : {
        "updatedKeyId" : {
          "signingKey" : "upD4t3d.s1gNiNg.K3y/t3XT"
        }
      }
    },
    "samlConfig" : {
      "assertionSigned" : true,
      "requestSigned" : true,
      "wantAssertionSigned" : false,
      "wantAuthnRequestSigned" : false,
      "assertionTimeToLiveSeconds" : 600,
      "certificate" : null,
      "privateKey" : null,
      "privateKeyPassword" : null
    },
    "links" : {
      "logout" : {
        "redirectUrl" : "/login",
        "redirectParameterName" : "redirect",
        "disableRedirectParameter" : true,
        "whitelist" : null
      },
      "selfService" : {
        "selfServiceLinksEnabled" : true,
        "signup" : "/create_account",
        "passwd" : "/forgot_password"
      }
    },
    "prompts" : [ {
      "name" : "username",
      "type" : "text",
      "text" : "Email"
    }, {
      "name" : "password",
      "type" : "password",
      "text" : "Password"
    }, {
      "name" : "passcode",
      "type" : "password",
      "text" : "One Time Code (Get on at /passcode)"
    } ]
  },
  "name" : "The Updated Twiglet Zone",
  "version" : 0,
  "description" : "Like the Twilight Zone but not tastier.",
  "created" : 1459376629360,
  "last_modified" : 1459376629360
}'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">PUT</span> <span class="nn">/identity-zones/twiglet-update</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiJlZTQ2MGE3Mi1lOTUxLTQwZjItYmIyYi0xZjE2MzA2ZGU5YzAiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMud3JpdGUiXSwiY2xpZW50X2lkIjoiaWRlbnRpdHkiLCJjaWQiOiJpZGVudGl0eSIsImF6cCI6ImlkZW50aXR5IiwiZ3JhbnRfdHlwZSI6ImNsaWVudF9jcmVkZW50aWFscyIsInJldl9zaWciOiJlYWFhNWQyNCIsImlhdCI6MTQ1OTM3NjYyOSwiZXhwIjoxNDU5NDE5ODI5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImlkZW50aXR5Iiwiem9uZXMiXX0.LcJwOPjPSgpi8OpXKNeYXZ6v9Xn6BSAhv0rhgC3oXLA</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1432</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-update"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"updatedKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"signingKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"upD4t3d.s1gNiNg.K3y/t3XT"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Updated Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Like the Twilight Zone but not tastier."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629360</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629360</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1459</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-update"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-update"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"updatedKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"signingKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"upD4t3d.s1gNiNg.K3y/t3XT"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Updated Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Like the Twilight Zone but not tastier."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629330</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629389</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Path Parameters</em></p>

<p>/identity-zones/{id}</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Unique ID of the identity zone to update</td>
</tr>
</tbody></table>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Bearer token containing <code class="prettyprint">zones.write</code> or <code class="prettyprint">zones.&lt;zone id&gt;.admin</code></td>
</tr>
</tbody></table>

<p><em>Request Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Constraints</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subdomain</td>
<td>String</td>
<td>Required</td>
<td>Unique subdomain for the running instance. May only contain legal characters for a subdomain name.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Required</td>
<td>Human-readable zone name</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Optional</td>
<td>Description of the zone</td>
</tr>
<tr>
<td>version</td>
<td>Number</td>
<td>Optional</td>
<td>Reserved for future use of E-Tag versioning</td>
</tr>
<tr>
<td>config.tokenPolicy</td>
<td>Object</td>
<td>Optional</td>
<td>Various fields pertaining to the JWT access and refresh tokens.</td>
</tr>
<tr>
<td>config.tokenPolicy.activeKeyId</td>
<td>String</td>
<td>Required if <code class="prettyprint">config.tokenPolicy.keys</code> are set</td>
<td>The ID for the key that is being used to sign tokens</td>
</tr>
<tr>
<td>config.tokenPolicy.keys</td>
<td>Object</td>
<td>Optional</td>
<td>Keys which will be used to sign the token</td>
</tr>
<tr>
<td>config.tokenPolicy.accessTokenValidity</td>
<td>Number</td>
<td>Optional</td>
<td>Time in seconds between when a access token is issued and when it expires. Defaults to global <code class="prettyprint">accessTokenValidity</code></td>
</tr>
<tr>
<td>config.tokenPolicy.refreshTokenValidity</td>
<td>Number</td>
<td>Optional</td>
<td>Time in seconds between when a refresh token is issued and when it expires. Defaults to global <code class="prettyprint">refreshTokenValidity</code></td>
</tr>
<tr>
<td>config.samlConfig.assertionSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>If <code class="prettyprint">true</code>, the SAML provider will sign all assertions</td>
</tr>
<tr>
<td>config.samlConfig.wantAssertionSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, all assertions received by the SAML provider must be signed. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.requestSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, the service provider will sign all outgoing authentication requests. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.wantAuthnRequestSigned</td>
<td>Boolean</td>
<td>Optional</td>
<td>If <code class="prettyprint">true</code>, the authentication request from the partner service provider must be signed.</td>
</tr>
<tr>
<td>config.samlConfig.assertionTimeToLiveSeconds</td>
<td>Number</td>
<td>Optional</td>
<td>The lifetime of a SAML assertion in seconds. Defaults to 600.</td>
</tr>
<tr>
<td>config.samlConfig.certificate</td>
<td>String</td>
<td>Optional</td>
<td>Exposed SAML metadata property. The certificate used to sign all communications.</td>
</tr>
<tr>
<td>config.samlConfig.privateKey</td>
<td>String</td>
<td>Optional</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key.</td>
</tr>
<tr>
<td>config.samlConfig.privateKeyPassword</td>
<td>String</td>
<td>Optional</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key password. Reserved for future use.</td>
</tr>
<tr>
<td>config.links.logout.redirectUrl</td>
<td>String</td>
<td>Optional</td>
<td>Logout redirect url</td>
</tr>
<tr>
<td>config.links.logout.redirectParameterName</td>
<td>String</td>
<td>Optional</td>
<td>Changes the name of the redirect parameter</td>
</tr>
<tr>
<td>config.links.logout.disableRedirectParameter</td>
<td>Boolean</td>
<td>Optional</td>
<td>Whether or not to allow the redirect parameter on logout</td>
</tr>
<tr>
<td>config.links.logout.whitelist</td>
<td>Array</td>
<td>Optional</td>
<td>List of allowed whitelist redirects</td>
</tr>
<tr>
<td>config.links.selfService.selfServiceLinksEnabled</td>
<td>Boolean</td>
<td>Optional</td>
<td>Whether or not users are allowed to sign up or reset their passwords via the UI</td>
</tr>
<tr>
<td>config.links.selfService.signup</td>
<td>String</td>
<td>Optional</td>
<td>Where users are directed upon clicking the account creation link</td>
</tr>
<tr>
<td>config.links.selfService.passwd</td>
<td>String</td>
<td>Optional</td>
<td>Where users are directed upon clicking the password reset link</td>
</tr>
<tr>
<td>config.prompts[]</td>
<td>Array</td>
<td>Optional</td>
<td>List of fields that users are prompted for to login. Defaults to username, password, and passcode.</td>
</tr>
<tr>
<td>config.prompts[].name</td>
<td>String</td>
<td>Optional</td>
<td>Name of field</td>
</tr>
<tr>
<td>config.prompts[].type</td>
<td>String</td>
<td>Optional</td>
<td>What kind of field this is (e.g. text or password)</td>
</tr>
<tr>
<td>config.prompts[].text</td>
<td>String</td>
<td>Optional</td>
<td>Actual text displayed on prompt for field</td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Unique ID of the identity zone</td>
</tr>
<tr>
<td>subdomain</td>
<td>String</td>
<td>Unique subdomain for the running instance. May only contain legal characters for a subdomain name.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Human-readable zone name</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Description of the zone</td>
</tr>
<tr>
<td>version</td>
<td>Number</td>
<td>Reserved for future use of E-Tag versioning</td>
</tr>
<tr>
<td>config.tokenPolicy</td>
<td>Object</td>
<td>Various fields pertaining to the JWT access and refresh tokens.</td>
</tr>
<tr>
<td>config.tokenPolicy.activeKeyId</td>
<td>String</td>
<td>The ID for the key that is being used to sign tokens</td>
</tr>
<tr>
<td>config.tokenPolicy.keys</td>
<td>Object</td>
<td>Keys which will be used to sign the token</td>
</tr>
<tr>
<td>config.tokenPolicy.accessTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a access token is issued and when it expires. Defaults to global <code class="prettyprint">accessTokenValidity</code></td>
</tr>
<tr>
<td>config.tokenPolicy.refreshTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a refresh token is issued and when it expires. Defaults to global <code class="prettyprint">refreshTokenValidity</code></td>
</tr>
<tr>
<td>config.samlConfig.assertionSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the SAML provider will sign all assertions</td>
</tr>
<tr>
<td>config.samlConfig.wantAssertionSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, all assertions received by the SAML provider must be signed. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.requestSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, the service provider will sign all outgoing authentication requests. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.wantAuthnRequestSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the authentication request from the partner service provider must be signed.</td>
</tr>
<tr>
<td>config.samlConfig.assertionTimeToLiveSeconds</td>
<td>Number</td>
<td>The lifetime of a SAML assertion in seconds. Defaults to 600.</td>
</tr>
<tr>
<td>config.samlConfig.certificate</td>
<td>String</td>
<td>Exposed SAML metadata property. The certificate used to sign all communications.</td>
</tr>
<tr>
<td>config.samlConfig.privateKey</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key.</td>
</tr>
<tr>
<td>config.samlConfig.privateKeyPassword</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key password. Reserved for future use.</td>
</tr>
<tr>
<td>config.links.logout.redirectUrl</td>
<td>String</td>
<td>Logout redirect url</td>
</tr>
<tr>
<td>config.links.logout.redirectParameterName</td>
<td>String</td>
<td>Changes the name of the redirect parameter</td>
</tr>
<tr>
<td>config.links.logout.disableRedirectParameter</td>
<td>Boolean</td>
<td>Whether or not to allow the redirect parameter on logout</td>
</tr>
<tr>
<td>config.links.logout.whitelist</td>
<td>Array</td>
<td>List of allowed whitelist redirects</td>
</tr>
<tr>
<td>config.links.selfService.selfServiceLinksEnabled</td>
<td>Boolean</td>
<td>Whether or not users are allowed to sign up or reset their passwords via the UI</td>
</tr>
<tr>
<td>config.links.selfService.signup</td>
<td>String</td>
<td>Where users are directed upon clicking the account creation link</td>
</tr>
<tr>
<td>config.links.selfService.passwd</td>
<td>String</td>
<td>Where users are directed upon clicking the password reset link</td>
</tr>
<tr>
<td>config.prompts[]</td>
<td>Array</td>
<td>List of fields that users are prompted for to login. Defaults to username, password, and passcode.</td>
</tr>
<tr>
<td>config.prompts[].name</td>
<td>String</td>
<td>Name of field</td>
</tr>
<tr>
<td>config.prompts[].type</td>
<td>String</td>
<td>What kind of field this is (e.g. text or password)</td>
</tr>
<tr>
<td>config.prompts[].text</td>
<td>String</td>
<td>Actual text displayed on prompt for field</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - Invalid token</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Insufficient scope (zone admins can only update own zone)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - Update to nonexistent zone</td>
</tr>
<tr>
<td>422</td>
<td>Unprocessable Entity - Invalid zone details</td>
</tr>
</tbody></table>

<h2 id="deleting-an-identity-zone">Deleting an Identity Zone</h2>
<pre class="highlight shell"><code><span class="gp">$ </span>curl <span class="s1">'http://localhost/identity-zones/twiglet-delete'</span> -i -X DELETE -H <span class="s1">'Authorization: Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIwYTFiM2YxNy1iNTcxLTQ4MmEtYWYxYi04OTc4YmMxZWI4NTAiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMud3JpdGUiXSwiY2xpZW50X2lkIjoiaWRlbnRpdHkiLCJjaWQiOiJpZGVudGl0eSIsImF6cCI6ImlkZW50aXR5IiwiZ3JhbnRfdHlwZSI6ImNsaWVudF9jcmVkZW50aWFscyIsInJldl9zaWciOiJlYWFhNWQyNCIsImlhdCI6MTQ1OTM3NjYyOSwiZXhwIjoxNDU5NDE5ODI5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImlkZW50aXR5Iiwiem9uZXMiXX0.Ev1D6pu0n8a-UOS-LxkUMvfFMLxbZmxX42eduKLzYsA'</span> -H <span class="s1">'Content-Type: application/json'</span>
</code></pre>
<pre class="highlight http"><code><span class="nf">DELETE</span> <span class="nn">/identity-zones/twiglet-delete</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer eyJhbGciOiJIUzI1NiIsImtpZCI6ImxlZ2FjeS10b2tlbi1rZXkiLCJ0eXAiOiJKV1QifQ.eyJqdGkiOiIwYTFiM2YxNy1iNTcxLTQ4MmEtYWYxYi04OTc4YmMxZWI4NTAiLCJzdWIiOiJpZGVudGl0eSIsImF1dGhvcml0aWVzIjpbInpvbmVzLnJlYWQiLCJjbG91ZF9jb250cm9sbGVyLnJlYWQiLCJ6b25lcy53cml0ZSIsInNjaW0uem9uZXMiLCJ1YWEucmVzb3VyY2UiXSwic2NvcGUiOlsiem9uZXMud3JpdGUiXSwiY2xpZW50X2lkIjoiaWRlbnRpdHkiLCJjaWQiOiJpZGVudGl0eSIsImF6cCI6ImlkZW50aXR5IiwiZ3JhbnRfdHlwZSI6ImNsaWVudF9jcmVkZW50aWFscyIsInJldl9zaWciOiJlYWFhNWQyNCIsImlhdCI6MTQ1OTM3NjYyOSwiZXhwIjoxNDU5NDE5ODI5LCJpc3MiOiJodHRwOi8vbG9jYWxob3N0OjgwODAvdWFhL29hdXRoL3Rva2VuIiwiemlkIjoidWFhIiwiYXVkIjpbImlkZW50aXR5Iiwiem9uZXMiXX0.Ev1D6pu0n8a-UOS-LxkUMvfFMLxbZmxX42eduKLzYsA</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">localhost</span>

</code></pre>
<pre class="highlight http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Cache-Control</span><span class="p">:</span> <span class="s">no-cache, no-store, max-age=0, must-revalidate</span>
<span class="na">Pragma</span><span class="p">:</span> <span class="s">no-cache</span>
<span class="na">Expires</span><span class="p">:</span> <span class="s">0</span>
<span class="na">X-XSS-Protection</span><span class="p">:</span> <span class="s">1; mode=block</span>
<span class="na">X-Frame-Options</span><span class="p">:</span> <span class="s">DENY</span>
<span class="na">X-Content-Type-Options</span><span class="p">:</span> <span class="s">nosniff</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json;charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">1295</span>

<span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-delete"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"subdomain"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"twiglet-delete"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"config"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"tokenPolicy"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"accessTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"refreshTokenValidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"activeKeyId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"keys"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"samlConfig"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"assertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"requestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAssertionSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"wantAuthnRequestSigned"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"assertionTimeToLiveSeconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">600</span><span class="p">,</span><span class="w">
      </span><span class="nt">"certificate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKey"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"privateKeyPassword"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"links"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"logout"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"redirectUrl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/login"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"redirectParameterName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"redirect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"disableRedirectParameter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"whitelist"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"selfService"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"selfServiceLinksEnabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"signup"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/create_account"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"passwd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/forgot_password"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"prompts"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Email"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"passcode"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"One Time Code (Get on at /passcode)"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"The Twiglet Zone"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"version"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629084</span><span class="p">,</span><span class="w">
  </span><span class="nt">"last_modified"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1459376629084</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><em>Path Parameters</em></p>

<p>/identity-zones/{id}</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Unique ID of the identity zone to delete</td>
</tr>
</tbody></table>

<p><em>Request Headers</em></p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Authorization</td>
<td>Bearer token containing <code class="prettyprint">zones.write</code></td>
</tr>
</tbody></table>

<p><em>Response Fields</em></p>

<table><thead>
<tr>
<th>Path</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>String</td>
<td>Unique ID of the identity zone</td>
</tr>
<tr>
<td>subdomain</td>
<td>String</td>
<td>Unique subdomain for the running instance. May only contain legal characters for a subdomain name.</td>
</tr>
<tr>
<td>name</td>
<td>String</td>
<td>Human-readable zone name</td>
</tr>
<tr>
<td>description</td>
<td>String</td>
<td>Description of the zone</td>
</tr>
<tr>
<td>version</td>
<td>Number</td>
<td>Reserved for future use of E-Tag versioning</td>
</tr>
<tr>
<td>config.tokenPolicy</td>
<td>Object</td>
<td>Various fields pertaining to the JWT access and refresh tokens.</td>
</tr>
<tr>
<td>config.tokenPolicy.activeKeyId</td>
<td>String</td>
<td>The ID for the key that is being used to sign tokens</td>
</tr>
<tr>
<td>config.tokenPolicy.keys</td>
<td>Object</td>
<td>Keys which will be used to sign the token</td>
</tr>
<tr>
<td>config.tokenPolicy.accessTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a access token is issued and when it expires. Defaults to global <code class="prettyprint">accessTokenValidity</code></td>
</tr>
<tr>
<td>config.tokenPolicy.refreshTokenValidity</td>
<td>Number</td>
<td>Time in seconds between when a refresh token is issued and when it expires. Defaults to global <code class="prettyprint">refreshTokenValidity</code></td>
</tr>
<tr>
<td>config.samlConfig.assertionSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the SAML provider will sign all assertions</td>
</tr>
<tr>
<td>config.samlConfig.wantAssertionSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, all assertions received by the SAML provider must be signed. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.requestSigned</td>
<td>Boolean</td>
<td>Exposed SAML metadata property. If <code class="prettyprint">true</code>, the service provider will sign all outgoing authentication requests. Defaults to <code class="prettyprint">true</code>.</td>
</tr>
<tr>
<td>config.samlConfig.wantAuthnRequestSigned</td>
<td>Boolean</td>
<td>If <code class="prettyprint">true</code>, the authentication request from the partner service provider must be signed.</td>
</tr>
<tr>
<td>config.samlConfig.assertionTimeToLiveSeconds</td>
<td>Number</td>
<td>The lifetime of a SAML assertion in seconds. Defaults to 600.</td>
</tr>
<tr>
<td>config.samlConfig.certificate</td>
<td>String</td>
<td>Exposed SAML metadata property. The certificate used to sign all communications.</td>
</tr>
<tr>
<td>config.samlConfig.privateKey</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key.</td>
</tr>
<tr>
<td>config.samlConfig.privateKeyPassword</td>
<td>String</td>
<td>Exposed SAML metadata property. The SAML provider&rsquo;s private key password. Reserved for future use.</td>
</tr>
<tr>
<td>config.links.logout.redirectUrl</td>
<td>String</td>
<td>Logout redirect url</td>
</tr>
<tr>
<td>config.links.logout.redirectParameterName</td>
<td>String</td>
<td>Changes the name of the redirect parameter</td>
</tr>
<tr>
<td>config.links.logout.disableRedirectParameter</td>
<td>Boolean</td>
<td>Whether or not to allow the redirect parameter on logout</td>
</tr>
<tr>
<td>config.links.logout.whitelist</td>
<td>Array</td>
<td>List of allowed whitelist redirects</td>
</tr>
<tr>
<td>config.links.selfService.selfServiceLinksEnabled</td>
<td>Boolean</td>
<td>Whether or not users are allowed to sign up or reset their passwords via the UI</td>
</tr>
<tr>
<td>config.links.selfService.signup</td>
<td>String</td>
<td>Where users are directed upon clicking the account creation link</td>
</tr>
<tr>
<td>config.links.selfService.passwd</td>
<td>String</td>
<td>Where users are directed upon clicking the password reset link</td>
</tr>
<tr>
<td>config.prompts[]</td>
<td>Array</td>
<td>List of fields that users are prompted for to login. Defaults to username, password, and passcode.</td>
</tr>
<tr>
<td>config.prompts[].name</td>
<td>String</td>
<td>Name of field</td>
</tr>
<tr>
<td>config.prompts[].type</td>
<td>String</td>
<td>What kind of field this is (e.g. text or password)</td>
</tr>
<tr>
<td>config.prompts[].text</td>
<td>String</td>
<td>Actual text displayed on prompt for field</td>
</tr>
</tbody></table>

<p><em>Error Codes</em></p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized - Invalid token</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden - Insufficient scope (zone admins can only delete their own zone)</td>
</tr>
<tr>
<td>404</td>
<td>Not Found - Zone does not exist</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
